---
tags:
  - ๐network/cisco
  - ๐network/cisco/cmd
๐Stack: ๐ง Cisco
๐ Device:
  - โ Rtr
  - โ Sw (L3)
๐ถ Mode:
  - โ๏ธ Config-If
๐๏ธ Category:
  - โก Optimization
  - ๐ฆ Traffic Engineering
๐ Description: ะััะฝะพะต ะทะฐะดะฐะฝะธะต ััะพะธะผะพััะธ (ะผะตััะธะบะธ) ะฝะฐ ะบะพะฝะบัะตัะฝะพะผ ะธะฝัะตััะตะนัะต. ะะตัะตะพะฟัะตะดะตะปัะตั ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัะฐััะตั, ะพัะฝะพะฒะฐะฝะฝัะน ะฝะฐ ะฟัะพะฟััะบะฝะพะน ัะฟะพัะพะฑะฝะพััะธ. ะัะฟะพะปัะทัะตััั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟัััะผะธ ััะฐัะธะบะฐ (Traffic Engineering).
โก Alias: ip o c 100
๐ป Command: ip ospf cost <value>
---
# ๐ ะะปะฐะฒะฐ: ะััะฝะฐั ะฝะฐัััะพะนะบะฐ ััะพะธะผะพััะธ (Cost)

ะะพะผะฐะฝะดะฐ `ip ospf cost` โ ััะพ ะธะฝััััะผะตะฝั **Traffic Engineering**.
ะ OSPF ะผะฐััััั ะฒัะฑะธัะฐะตััั ะฟะพ ะฟัะธะฝัะธะฟั: *"ะฃ ะบะพะณะพ ััะผะผะฐัะฝะฐั ััะพะธะผะพััั (Metric) ะดะพ ัะตะปะธ ะผะตะฝััะต, ััะดะฐ ะธ ะธะดะตะผ"*.
ะะพ ัะผะพะปัะฐะฝะธั ัะพััะตั ััะธัะฐะตั ััะพะธะผะพััั ัะฐะผ (ะธััะพะดั ะธะท ัะบะพัะพััะธ ะฟะพััะฐ). ะญัะฐ ะบะพะผะฐะฝะดะฐ ะฟะพะทะฒะพะปัะตั **ะณััะฑะพ ะฒะผะตัะฐัััั** ะฒ ะผะฐัะตะผะฐัะธะบั ะธ ัะบะฐะทะฐัั: *"ะะตะฒะฐะถะฝะพ, ะบะฐะบะฐั ััั ัะบะพัะพััั, ััะธัะฐะน, ััะพ ััะพั ะปะธะฝะบ ััะพะธั 500"*.

---

> [!INFO]+ ๐๏ธ 1. ะฅะฐัะฐะบัะตัะธััะธะบะธ
> | ะะฐัะฐะผะตัั | ะะฝะฐัะตะฝะธะต |
> | :--- | :--- |
> | **ะะดะต ะฒะฒะพะดะธัั** | `(config-if)#` (ะะฐ ะธะฝัะตััะตะนัะต) |
> | **ะะธะฐะฟะฐะทะพะฝ** | **1 - 65535** |
> | **ะะพะณะธะบะฐ** | **Lower is Better.** ะงะตะผ ะผะตะฝััะต ัะธัะปะพ, ัะตะผ ะฟัะตะดะฟะพััะธัะตะปัะฝะตะต ััะพั ะฟััั. |
> | **ะะปะธัะฝะธะต** | ะะทะผะตะฝัะตั ะผะตััะธะบั ัะพะปัะบะพ ะดะปั **ะฒัะพะดััะตะณะพ** ััะฐัะธะบะฐ ะฝะฐ ััะพั ะธะฝัะตััะตะนั (ั ัะพัะบะธ ะทัะตะฝะธั ัะพะฟะพะปะพะณะธะธ). |
> | **ะัะธะพัะธัะตั** | **Absolute.** ะััะฝะฐั ะฝะฐัััะพะนะบะฐ ะฒัะตะณะดะฐ ะฟะพะฑะตะถะดะฐะตั ะฐะฒัะพะผะฐัะธัะตัะบัั ัะพัะผัะปั. |

---

## 2. ะะฐัะตะผ ััะพ ะฝัะถะฝะพ? (Use Cases)

### ๐ฐ๏ธ ะัะพะฑะปะตะผะฐ "ะกะปะตะฟะพัั" ะบ 1Gbps+
ะะพ ัะผะพะปัะฐะฝะธั ัะพัะผัะปะฐ OSPF: $Cost = \frac{100 \text{ Mbps}}{\text{Bandwidth}}$.
ะะท-ะทะฐ ััะพะณะพ:
* FastEthernet (100M) = Cost 1
* GigabitEthernet (1G) = Cost 1 (ั.ะบ. ะดัะพะฑะธ ะพะบััะณะปััััั ะดะพ 1)
* 10 Gigabit = Cost 1

**ะัะพะฑะปะตะผะฐ:** ะะพััะตั ะฝะต ะฒะธะดะธั ัะฐะทะฝะธัั ะผะตะถะดั 100ะะฑะธั ะธ 10ะะฑะธั โ ะดะปั ะฝะตะณะพ ะพะฝะธ ะพะดะธะฝะฐะบะพะฒั.
**ะะตัะตะฝะธะต:** ะะธะฑะพ ะผะตะฝััั ะณะปะพะฑะฐะปัะฝัั ัะพัะผัะปั (`auto-cost reference-bandwidth`), ะปะธะฑะพ ัะพัะตัะฝะพ ะทะฐะดะฐัั `ip ospf cost 10` ะฝะฐ ะณะธะณะฐะฑะธัะฝะพะผ ะปะธะฝะบะต ะฒัััะฝัั.

### ๐ฑ๏ธ ะะฐะฝะธะฟัะปััะธั ััะฐัะธะบะพะผ (Traffic Steering)
ะัะตะดััะฐะฒััะต, ััะพ ั ะฒะฐั ะดะฒะฐ ะฟัะพะฒะฐะนะดะตัะฐ:
1.  **ISP-A (ะัะฝะพะฒะฝะพะน):** ะัััััะน, ะฝะพ ะดะพัะพะณะพะน.
2.  **ISP-B (ะะตะทะตัะฒะฝัะน):** ะะตะดะปะตะฝะฝัะน, ะดะตัะตะฒัะน.

OSPF ะผะพะถะตั ะฒัะฑัะฐัั ISP-B, ะฟะพัะพะผั ััะพ ัะฐะผ "ะผะตะฝััะต ัะพะฟะพะฒ" ะธะปะธ ัะปััะฐะนะฝะพ.
ะั ะผะพะถะตัะต ะทะฐะนัะธ ะฝะฐ ะธะฝัะตััะตะนั ะบ ISP-B ะธ ัะบะฐะทะฐัั: `ip ospf cost 1000`.
ะขะตะฟะตัั OSPF ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐัั ััะพั ะปะธะฝะบ ัะพะปัะบะพ ะฒ ัะฐะผะพะผ ะบัะฐะนะฝะตะผ ัะปััะฐะต, ะตัะปะธ ISP-A ัะฟะฐะดะตั.

---

> [!NOTE]- ๐งฎ 3. ะะฐัะตะผะฐัะธะบะฐ OSPF (ะกะฟัะฐะฒะบะฐ)
> ะะตััะธะบะฐ ะผะฐัััััะฐ โ ััะพ ััะผะผะฐ ััะพะธะผะพััะตะน **ะฒัะตั ะธััะพะดััะธั ะธะฝัะตััะตะนัะพะฒ** ะฝะฐ ะฟััะธ ะบ ัะตะปะธ.
> 
> $$Metric = Cost_{L1} + Cost_{L2} + \dots + Cost_{Ln}$$
> 
> ะะทะผะตะฝัั Cost ะฝะฐ ะพะดะฝะพะผ ะธะฝัะตััะตะนัะต, ะฒั ัะฒะตะปะธัะธะฒะฐะตัะต "ะดะปะธะฝั" ะฒัะตะณะพ ะฟััะธ, ะฟัะพัะพะดััะตะณะพ ัะตัะตะท ััะพั ะธะฝัะตััะตะนั.

---

> [!EXAMPLE]+ ๐ 4. ะัะธะผะตั ะฝะฐัััะพะนะบะธ
> ะะฐะดะฐัะฐ: ะกะดะตะปะฐัั ะบะฐะฝะฐะป ัะตัะตะท `GigabitEthernet0/1` ะผะตะฝะตะต ะฟัะธะฒะปะตะบะฐัะตะปัะฝัะผ (ัะตะทะตัะฒะฝัะผ), ะฟะพะฒััะธะฒ ะตะณะพ ััะพะธะผะพััั ะดะพ 500 (ััะฐะฝะดะฐััะฝะฐั ะพะฑััะฝะพ 1).
> 
> ```bash
> Router(config)# interface GigabitEthernet0/1
> ! ะัะธะฝัะดะธัะตะปัะฝะพ ัััะดัะฐะตะผ ะผะตััะธะบั
> Router(config-if)# ip ospf cost 500
> Router(config-if)# end
> ```
> 
> **ะัะพะฒะตัะบะฐ:**
> ```bash
> Router# show ip ospf interface GigabitEthernet0/1
> GigabitEthernet0/1 is up, line protocol is up 
>   Internet Address 10.1.1.1/30, Area 0 
>   Process ID 1, Router ID 1.1.1.1, Network Type BROADCAST, Cost: 500
> ```

---

## ๐ ะกะฒัะทะธ
* **ะะปะพะฑะฐะปัะฝะฐั ะฝะฐัััะพะนะบะฐ:** ะะทะผะตะฝะตะฝะธะต ัะพัะผัะปั ะดะปั ะฒัะตั ะฟะพััะพะฒ [[Cs - ospf auto-cost reference-bandwidth | auto-cost reference-bandwidth]].
* **ะัะพัะผะพัั:** ะัะพะฒะตัะบะฐ ัะตะบััะตะน ััะพะธะผะพััะธ [[Cs - show ip ospf interface | show ip ospf interface]].