---
tags:
  - üåênetwork/cisco
  - üåênetwork/cisco/cmd
üí†Stack: üüß Cisco
üìü Device:
  - ‚óà Rtr
  - ‚åò Sw
üì∂ Mode:
  - ‚öôÔ∏è Config
üóÇÔ∏è Category:
  - üõ°Ô∏è Sec
  - üïπÔ∏è Mgmt
üìù Description: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø–∏—Å–∫–æ–≤ –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä) –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É.
‚ö° Alias: aaa auth log
üíª Command: aaa authentication login
---

# üìñ –ì–ª–∞–≤–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –≤—Ö–æ–¥–∞ (Authentication)

–ö–æ–º–∞–Ω–¥–∞ `aaa authentication login` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, **–∫–∞–∫ –∏–º–µ–Ω–Ω–æ** —Ä–æ—É—Ç–µ—Ä –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–π—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –∏–ª–∏ –ø–æ SSH.
–ò–º–µ–Ω–Ω–æ —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—É—é `login local` –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö.

---

> [!INFO]+ üèóÔ∏è 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ø–∏—Å–∫–æ–≤: Default vs Named
> –í —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—Ç–æ—Ä–æ–µ —Å–ª–æ–≤–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ. Cisco —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Å–ø–∏—Å–∫–∏ –Ω–∞ –¥–≤–∞ —Ç–∏–ø–∞.
> 
> **–ê. –°–ø–∏—Å–æ–∫ "default" (–ì–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ)**
> –ï—Å–ª–∏ –≤—ã –Ω–∞–∑—ã–≤–∞–µ—Ç–µ —Å–ø–∏—Å–æ–∫ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ª–æ–≤–æ–º `default`, –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ "–ì–ª–æ–±–∞–ª—å–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ".
> * **–õ–æ–≥–∏–∫–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ **–≤—Å–µ–º** –ª–∏–Ω–∏—è–º (Console, VTY, Aux), –∫ –∫–æ—Ç–æ—Ä—ã–º *–Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω* –¥—Ä—É–≥–æ–π —Å–ø–∏—Å–æ–∫ –≤—Ä—É—á–Ω—É—é.
> * **–°—Ü–µ–Ω–∞—Ä–∏–π:** "–õ–µ–Ω–∏–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞". –í—ã –ø–∏—à–µ—Ç–µ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É, –∏ –æ–Ω–∞ –∑–∞—â–∏—â–∞–µ—Ç —Å—Ä–∞–∑—É –≤–µ—Å—å —Ä–æ—É—Ç–µ—Ä.
> ```bash
> aaa authentication login default local
> ```
> 
> **–ë. –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ (–¢–æ—á–µ—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)**
> –ï—Å–ª–∏ –≤—ã –¥–∞–µ—Ç–µ —Å–ø–∏—Å–∫—É –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `SSH-ONLY`), –æ–Ω **–Ω–µ –¥–µ–ª–∞–µ—Ç –Ω–∏—á–µ–≥–æ**, –ø–æ–∫–∞ –≤—ã –µ–≥–æ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç–µ.
> * **–õ–æ–≥–∏–∫–∞:** –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–∞–º, –∫—É–¥–∞ –≤—ã –µ–≥–æ —è–≤–Ω–æ "–ø—Ä–∏–≤—è–∑–∞–ª–∏" –∫–æ–º–∞–Ω–¥–æ–π `login authentication ...`.
> * **–°—Ü–µ–Ω–∞—Ä–∏–π:** "–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –ø—Ä–∞–≤–∏–ª". –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –∫–æ–Ω—Å–æ–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ –Ω—É–∂–µ–Ω, –∞ –Ω–∞ SSH ‚Äî –Ω—É–∂–µ–Ω —Å—Ç—Ä–æ–≥–∏–π.
> ```bash
> ! 1. –°–æ–∑–¥–∞–µ–º (–ü–æ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
> aaa authentication login SSH-ONLY group tacacs+
> ! 2. –ü—Ä–∏–º–µ–Ω—è–µ–º (–¢–æ–ª—å–∫–æ –Ω–∞ VTY)
> line vty 0 4
>  login authentication SSH-ONLY
> ```
> 
> **‚öîÔ∏è –ë–∏—Ç–≤–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:**
> –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ–≥–¥–∞ –≥–ª–∞–≤–Ω–µ–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ. –ï—Å–ª–∏ –Ω–∞ –ª–∏–Ω–∏–∏ –≤–∏—Å–∏—Ç `SSH-ONLY`, —Ç–æ `default` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è.

> [!NOTE]+ üß© 2. –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–ê—Ä–≥—É–º–µ–Ω—Ç—ã)
> –ß—Ç–æ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø–æ—Å–ª–µ –∏–º–µ–Ω–∏ —Å–ø–∏—Å–∫–∞)?
> 
> | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
> | :--- | :--- | :--- |
> | `local` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑—É `username`. | –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –¥–ª—è –º–∞–ª—ã—Ö —Å–µ—Ç–µ–π. |
> | `group tacacs+` | –°–ø—Ä–æ—Å–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ TACACS+. | –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç. |
> | `group radius` | –°–ø—Ä–æ—Å–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ RADIUS. | –†–µ–∂–µ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤, —á–∞—â–µ –¥–ª—è Wi-Fi. |
> | `enable` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å `enable secret` –∫–∞–∫ –ø–∞—Ä–æ–ª—å –≤—Ö–æ–¥–∞. | –†–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥ ("Backdoor"). |
> | `none` | **–ü—É—Å–∫–∞—Ç—å –±–µ–∑ –ø–∞—Ä–æ–ª—è.** | –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏–ª–∏ –∫–æ–Ω—Å–æ–ª–∏ –≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º –±—É–Ω–∫–µ—Ä–µ! |
> | `local-case` | –¢–æ –∂–µ, —á—Ç–æ `local`, –Ω–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É (Bob != bob). | –†–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. |

> [!danger]+ üß† 3. –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–±–æ—Ä–∞ (Fall-through)
> –†–æ—É—Ç–µ—Ä –∏–¥–µ—Ç –ø–æ —Å–ø–∏—Å–∫—É –º–µ—Ç–æ–¥–æ–≤ —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ.
> 
> `aaa authentication login default group tacacs+ local`
> 
> * **–°—Ü–µ–Ω–∞—Ä–∏–π –ê:** –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ –ø–∞—Ä–æ–ª—å –Ω–µ–≤–µ—Ä–Ω—ã–π.
>     * –†–µ–∑—É–ª—å—Ç–∞—Ç: **Access Denied.** (–†–æ—É—Ç–µ—Ä –ù–ï –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ `local`).
> * **–°—Ü–µ–Ω–∞—Ä–∏–π –ë:** –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (Timeout).
>     * –†–µ–∑—É–ª—å—Ç–∞—Ç: –†–æ—É—Ç–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –º–µ—Ç–æ–¥—É (`local`).
> 
> **–ü–æ—á–µ–º—É —Ç–∞–∫?** –≠—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç –≤–∑–ª–æ–º–∞. –ï—Å–ª–∏ –±—ã –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –ø–∞—Ä–æ–ª–µ —Ä–æ—É—Ç–µ—Ä –ø–µ—Ä–µ–∫–ª—é—á–∞–ª—Å—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É, —Ö–∞–∫–µ—Ä –º–æ–≥ –±—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ "—É—Ä–æ–Ω–∏—Ç—å" –∫–∞–Ω–∞–ª –¥–æ —Å–µ—Ä–≤–µ—Ä–∞, —á—Ç–æ–±—ã –ø–æ–¥–±–∏—Ä–∞—Ç—å —Å–ª–∞–±—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å.

> [!NOTE]- üöÄ 4. –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –∂–∏–∑–Ω–∏ (Best Practices)
> 
> **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ (SOHO)**
> ```bash
> aaa new-model
> aaa authentication login default local
> ```
> 
> **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π (TACACS + –†–µ–∑–µ—Ä–≤)**
> –°–∞–º–∞—è –Ω–∞–¥–µ–∂–Ω–∞—è —Å—Ö–µ–º–∞. –û—Å–Ω–æ–≤–Ω–æ–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —Å–≥–æ—Ä–µ–ª ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–¥–º–∏–Ω.
> ```bash
> aaa authentication login default group tacacs+ local
> ```
> 
> **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π (–†–∞–∑–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞)**
> –ß–∞—Å—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –ø—Ä–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫–∞–±–µ–ª–µ–º (Console) –ø—É—Å–∫–∞–ª–æ —Å—Ä–∞–∑—É (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ), –∞ –ø–æ —Å–µ—Ç–∏ ‚Äî —Å—Ç—Ä–æ–≥–æ.
> ```bash
> ! 1. –°–ø–∏—Å–æ–∫ –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏ (–±–µ–∑ –ø–∞—Ä–æ–ª—è)
> aaa authentication login CONSOLE-NO-PASS none
> ! 2. –°–ø–∏—Å–æ–∫ –¥–ª—è SSH (–≥–ª–æ–±–∞–ª—å–Ω—ã–π default)
> aaa authentication login default local
> 
> ! 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
> line console 0
>  login authentication CONSOLE-NO-PASS
> ```

---

## üîó –°–≤—è–∑–∏
* **–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è —Ç–µ–º–∞:** [[Cs - aaa new-model]]
* **–ö–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:** [[Cs - username]]
* **–í–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–µ—Ä:** `tacacs-server host ...`