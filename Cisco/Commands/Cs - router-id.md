---
tags:
  - ๐network/cisco
  - ๐network/cisco/cmd
๐Stack: ๐ง Cisco
๐ Device:
  - โ Rtr
  - โ Sw (L3)
๐ถ Mode:
  - โ๏ธ Config-Router
๐๏ธ Category:
  - ๐ฃ๏ธ Routing
๐ Description: ะะตััะบะพ ะทะฐะดะฐะตั ะธะดะตะฝัะธัะธะบะฐัะพั ะผะฐัััััะธะทะฐัะพัะฐ (RID) ะดะปั ะฟัะพัะตััะฐ OSPF. ะะผะตะตั ะฝะฐะธะฒัััะธะน ะฟัะธะพัะธัะตั ะฝะฐะด ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะฒัะฑะพัะพะผ. ะขัะตะฑัะตั ะฟะตัะตะทะฐะฟััะบะฐ ะฟัะพัะตััะฐ ะดะปั ะฒัััะฟะปะตะฝะธั ะฒ ัะธะปั.
โก Alias: ro 1.1.1.1
๐ป Command: router-id <ip-address>
---
# ๐ ะะปะฐะฒะฐ: ะะฐัััะพะนะบะฐ Router ID (RID)

ะะพะผะฐะฝะดะฐ `router-id` ะฒัััะฝัั ะฝะฐะทะฝะฐัะฐะตั "ะธะผั" ะผะฐัััััะธะทะฐัะพัะฐ ะฒ ัะพะฟะพะปะพะณะธะธ OSPF.
RID โ ััะพ 32-ะฑะธัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั (ะฒัะณะปัะดะธั ะบะฐะบ IP), ะบะพัะพััะน ะฒะธะดัั ัะพัะตะดะธ. ะะผะตะฝะฝะพ ััะพั IP ะฒะธะดัั ัะพัะตะดะธ ะฒ ะบะพะผะฐะฝะดะตย`show ip ospf neighbor`.

---

> [!INFO]+ ๐๏ธ 1. ะฅะฐัะฐะบัะตัะธััะธะบะธ
> | ะะฐัะฐะผะตัั | ะะฝะฐัะตะฝะธะต |
> | :--- | :--- |
> | **ะะดะต ะฒะฒะพะดะธัั** | `(config-router)#` (ะะฝัััะธ ะฟัะพัะตััะฐ OSPF) |
> | **ะคะพัะผะฐั** | **IPv4 ะฐะดัะตั** (32 ะฑะธัะฐ), ะฝะฐะฟัะธะผะตั `1.1.1.1` |
> | **ะัะธะพัะธัะตั** | **ะะฐะธะฒัััะธะน.** ะะตัะตะบััะฒะฐะตั Loopback ะธ ัะธะทะธัะตัะบะธะต IP. |
> | **ะฃะฝะธะบะฐะปัะฝะพััั** | ะะฑัะทะฐะฝ ะฑััั **ัะฝะธะบะฐะปัะฝัะผ** ะฒ ะฟัะตะดะตะปะฐั ะฒัะตะน AS (ะฐะฒัะพะฝะพะผะฝะพะน ัะธััะตะผั). ะัะฑะปะธัะพะฒะฐะฝะธะต RID ะฟัะธะฒะตะดะตั ะบ ะฟะพััะพัะฝะฝัะผ ะพัะธะฑะบะฐะผ LSDB. |
> | **ะกะผะตะฝะฐ ID** | ะัะปะธ OSPF ัะถะต ัะฐะฑะพัะฐะป, ัะผะตะฝะฐ RID ััะตะฑัะตั ะบะพะผะฐะฝะดั `clear ip ospf process`. |

> [!NOTE]- ๐ 2. ะะตัะฐััะธั ะฒัะฑะพัะฐ RID (Election)
> ะัะปะธ ััะฐ ะบะพะผะฐะฝะดะฐ **ะฝะต** ะฒะฒะตะดะตะฝะฐ, ัะพััะตั ะฒัะฑะธัะฐะตั ะธะผั ัะฐะผ ะฟะพ ัะปะตะดัััะตะผั ะฐะปะณะพัะธัะผั (ัะฒะตััั ะฒะฝะธะท):
> 
> 1.  ๐ข **Manual Config:** ะะพะผะฐะฝะดะฐ `router-id` (ะฟะพะฑะตะถะดะฐะตั ะฒัะตะณะดะฐ).
> 2.  ๐ก **Loopback:** ะกะฐะผัะน ะฒััะพะบะธะน IP ะฝะฐ Loopback-ะธะฝัะตััะตะนัะฐั.
> 3.  ๐ด **Physical:** ะกะฐะผัะน ะฒััะพะบะธะน IP ะฝะฐ *ะฐะบัะธะฒะฝัั* (Up/Up) ัะธะทะธัะตัะบะธั ะธะฝัะตััะตะนัะฐั.
> 
> *ะะพัะตะผั Loopback ะปัััะต ัะธะทะธะบะธ? ะคะธะทะธัะตัะบะธะน ะปะธะฝะบ ะผะพะถะตั ัะฟะฐััั, ะธ ัะพะณะดะฐ ะธะผั ัะพััะตัะฐ ะธััะตะทะฝะตั/ะธะทะผะตะฝะธััั, ะฒัะทะฒะฐะฒ ะฟะตัะตััะตั ัะตัะธ. Loopback ะฒะตัะตะฝ.*

> [!QUESTION]+ โ ะะฐะถะฝะพ: ะงัะพ ัะฐะบะพะต Loopback ะฒ Cisco?
> **ะญัะพ ะะ** `127.0.0.1` **(Localhost).**
> ะ ัะตัะตะฒะพะผ ะพะฑะพััะดะพะฒะฐะฝะธะธ Loopback โ ััะพ **ะปะพะณะธัะตัะบะธะน (ะฒะธัััะฐะปัะฝัะน) ะธะฝัะตััะตะนั**, ะบะพัะพััะน ะฒั ัะพะทะดะฐะตัะต ะฒัััะฝัั.
> 
> * **ะัะปะธัะธะต ะพั ะะ:** ะะผั ะฝะฐะทะฝะฐัะฐัั **ะฟัะฑะปะธัะฝัะน/ัะตะฐะปัะฝัะน IP** (ะฝะฐะฟัะธะผะตั, `10.0.0.1` ะธะปะธ `1.1.1.1`). ะญัะพั IP ะฟะธะฝะณัะตััั ะธ ััะฐััะฒัะตั ะฒ ะผะฐัััััะธะทะฐัะธะธ.
> * **ะะฐัะตะผ ะพะฝ ะฝัะถะตะฝ?** ะคะธะทะธัะตัะบะธะน ะฟะพัั ะผะพะถะตั ัะฟะฐััั (ะพะฑััะฒ ะบะฐะฑะตะปั), ะธ ัะพะณะดะฐ RID ัะพััะตัะฐ ะธััะตะทะฝะตั, ะฒัะทะฒะฐะฒ ัะฑะพะน OSPF.
> * **ะกัะฐะฑะธะปัะฝะพััั:** Loopback ะธะฝัะตััะตะนั ะฒะธัััะฐะปะตะฝ, ะพะฝ **ะฒัะตะณะดะฐ UP**, ะฟะพะบะฐ ะฒะบะปััะตะฝ ัะฐะผ ัะพััะตั. ะญัะพ ะธะดะตะฐะปัะฝัะน "ัะบะพัั" ะดะปั Router ID.
> 
> **ะะฐะบ ัะพะทะดะฐัั Loopback:**
> ```bash
> Router(config)# interface loopback 0
> Router(config-if)# ip address 1.1.1.1 255.255.255.255
> ```
> [!NOTE]- ๐ป 3. ะกะธะฝัะฐะบัะธั
> ```bash
> router-id <IP_ADDRESS>
> ```

> [!WARNING]- โ๏ธ 4. ะะฐะถะฝัะน ะฝัะฐะฝั ะฟัะธ ัะผะตะฝะต
> ะัะปะธ ะฒั ะฒะฒะพะดะธัะต ััั ะบะพะผะฐะฝะดั ะฝะฐ **ัะถะต ัะฐะฑะพัะฐััะตะผ** OSPF, ะฒั ัะฒะธะดะธัะต ัะฐะบะพะต ัะพะพะฑัะตะฝะธะต:
> 
> `Reload or use "clear ip ospf process" command, for this to take effect`
> 
> ะะพััะตั ะฝะต ะผะตะฝัะตั ะธะผั ะฝะฐ ะปะตัั, ััะพะฑั ะฝะต ัะฐะทะพัะฒะฐัั ัะพัะตะดััะฒะพ. ะะฐะผ ะฝัะถะฝะพ ัะพะณะปะฐัะธัััั ะฝะฐ ะบะพัะพัะบะธะน ัะฐะทััะฒ ัะฒัะทะธ ะธ ัะฑัะพัะธัั ะฟัะพัะตัั ะฒัััะฝัั.

> [!NOTE]- ๐ 5. ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั
>
> > [!EXAMPLE]+ ะะฐัััะพะนะบะฐ "ั ะฝัะปั"
> > ```bash
> > Router(config)# router ospf 1
> > ! ะกัะฐะทั ะทะฐะดะฐะตะผ ID, ะฟะพะบะฐ ะฟัะพัะตัั ะฝะต ะฝะฐัะฐะป ัะฐะฑะพัั
> > Router(config-router)# router-id 10.0.0.1
> > Router(config-router)# network ...
> > ```
> 
> > [!EXAMPLE]+ ะกะผะตะฝะฐ ID ะฝะฐ ัะฐะฑะพัะฐััะตะผ ัะพััะตัะต
> > ```bash
> > ! 1. ะะตะฝัะตะผ ID
> > Router(config-router)# router-id 2.2.2.2
> > % OSPF: Reload or use "clear ip ospf process" command...
> > 
> > ! 2. ะััะพะดะธะผ ะฒ ะฟัะธะฒะธะปะตะณะธัะพะฒะฐะฝะฝัะน ัะตะถะธะผ
> > Router(config-router)# end
> > 
> > ! 3. ะกะฑัะฐััะฒะฐะตะผ ะฟัะพัะตัั (ะฝะฐ ัะตะบัะฝะดั ะฟัะพะฟะฐะดะตั ัะตัั!)
> > Router# clear ip ospf process
> > Reset ALL OSPF processes? [no]: yes
> > ```

---

## ๐ ะกะฒัะทะธ
* **ะะพะดะธัะตะปััะบะฐั ะบะพะผะฐะฝะดะฐ:** ะัะพะด ะฒ ะฟัะพัะตัั [[Cs - router ospf | router ospf]].
* **ะกะฑัะพั ะฟัะพัะตััะฐ:** ะะตะพะฑัะพะดะธะผ ะดะปั ะฟัะธะผะตะฝะตะฝะธั [[Cs - clear ip ospf process | clear ip ospf process]].
* **ะะธะฐะณะฝะพััะธะบะฐ:** ะัะพัะผะพัั ัะพัะตะดะตะน ะธ ะธั ID [[Cs - show ip ospf neighbor | show ip ospf neighbor]].