---
tags:
  - üåê/cisco
  - üåê/cisco/cmd
üí†Stack: üüß Cisco
üìü Device:
  - ‚óà Rtr
  - ‚åò Sw (L3)
üì∂ Mode:
  - ‚öôÔ∏è Config
üóÇÔ∏è Category:
  - üõ£Ô∏è Routing
üìù Description: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞. –£–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–æ—É—Ç–µ—Ä—É, –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–∫–µ—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.
‚ö° Alias: ip route
üíª Command: ip route
---
# üìñ –ì–ª–∞–≤–∞: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

–†–æ—É—Ç–µ—Ä ‚Äî —ç—Ç–æ –ø–æ—á—Ç–∞–ª—å–æ–Ω. –ö–æ–≥–¥–∞ –µ–º—É –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–∞–∫–µ—Ç, –æ–Ω —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è –∏ –∏—â–µ—Ç –µ–≥–æ –≤ —Å–≤–æ–µ–π "–ö–Ω–∏–≥–µ" (–¢–∞–±–ª–∏—Ü–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏).
–ö–æ–º–∞–Ω–¥–∞ `ip route` ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –≤—Ä—É—á–Ω—É—é –≤–ø–∏—Å–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –≤ —ç—Ç—É –∫–Ω–∏–≥—É.

---

> [!INFO]+ üèóÔ∏è 1. –°–∏–Ω—Ç–∞–∫—Å–∏—Å (–§–æ—Ä–º—É–ª–∞)
> –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Ç—Ä–∏ –≤–æ–ø—Ä–æ—Å–∞: **–ö—É–¥–∞?** **–°–∫–æ–ª—å–∫–æ?** –∏ **–ß–µ—Ä–µ–∑ –∫–æ–≥–æ?**
> 
> ```bash
> ip route <–ö–£–î–ê> <–ú–ê–°–ö–ê> <–ß–ï–†–ï–ó_–ö–û–ì–û> [AD]
> ```
> 
> | –ê—Ä–≥—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
> | :--- | :--- | :--- |
> | **<–ö–£–î–ê>** | –ê–¥—Ä–µ—Å —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (Network ID). –ù–µ IP –∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –∞ –∏–º–µ–Ω–Ω–æ –ø–æ–¥—Å–µ—Ç—å! | `192.168.20.0` |
> | **<–ú–ê–°–ö–ê>** | –ú–∞—Å–∫–∞ —ç—Ç–æ–π —É–¥–∞–ª–µ–Ω–Ω–æ–π —Å–µ—Ç–∏. | `255.255.255.0` |
> | **<–ß–ï–†–ï–ó_–ö–û–ì–û>** | **Next Hop IP.** IP-–∞–¥—Ä–µ—Å –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞ *—Å–ª–µ–¥—É—é—â–µ–≥–æ* —Ä–æ—É—Ç–µ—Ä–∞. | `10.0.0.2` |
> | *[AD]* | *(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)* –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è. –†–µ–π—Ç–∏–Ω–≥ –¥–æ–≤–µ—Ä–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1). | `10` |

> [!example]+ üöÄ 2. –°—Ü–µ–Ω–∞—Ä–∏–π –ê: –ú–∞—Ä—à—Ä—É—Ç –∫ —Å–æ—Å–µ–¥—É
> **–°–∏—Ç—É–∞—Ü–∏—è:**
> * –ú—ã ‚Äî –†–æ—É—Ç–µ—Ä –ê (–ú–æ—Å–∫–≤–∞).
> * –ú—ã —Ö–æ—Ç–∏–º –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∏–ª–∏–∞–ª (–ü–µ—Ç–µ—Ä–±—É—Ä–≥), –≥–¥–µ —Å–µ—Ç—å `192.168.50.0/24`.
> * –ú–µ–∂–¥—É –Ω–∞–º–∏ –ª–µ–∂–∏—Ç –ø—Ä—è–º–æ–π –ø—Ä–æ–≤–æ–¥. IP –∞–¥—Ä–µ—Å —Å–æ—Å–µ–¥–∞ (–≤—Ö–æ–¥–∞ –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥) ‚Äî `10.1.1.2`.
> 
> **–ö–æ–º–∞–Ω–¥–∞:**
> ```bash
> ! "–ß—Ç–æ–±—ã –ø–æ–ø–∞—Å—Ç—å –≤ —Å–µ—Ç—å 50.0, –∫–∏–¥–∞–π –ø–∞–∫–µ—Ç—ã –Ω–∞ 10.1.1.2"
> ip route 192.168.50.0 255.255.255.0 10.1.1.2
> ```

> [!example]+ üåç 3. –°—Ü–µ–Ω–∞—Ä–∏–π –ë: –®–ª—é–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –Ω–∞–¥–µ–∂–¥—ã (Default Route)
> **–°–∏—Ç—É–∞—Ü–∏—è:**
> * –ú—ã ‚Äî –æ—Ñ–∏—Å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä. –ú—ã –∑–Ω–∞–µ–º —Å–≤–æ–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏.
> * –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (Google, VK, YouTube) –Ω—É–∂–Ω–æ –∫–∏–¥–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É.
> * –ú—ã –Ω–µ –º–æ–∂–µ–º –ø—Ä–æ–ø–∏—Å–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –∫–æ –≤—Å–µ–º —Å–∞–π—Ç–∞–º –º–∏—Ä–∞.
> 
> **–†–µ—à–µ–Ω–∏–µ:** –ú–∞—Ä—à—Ä—É—Ç "–ù—É–ª–∏" (`0.0.0.0/0`). –û–∑–Ω–∞—á–∞–µ—Ç "–í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ".
> 
> **–ö–æ–º–∞–Ω–¥–∞:**
> ```bash
> ! "–ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å, –∫—É–¥–∞ –∏–¥—Ç–∏ ‚Äî –∏–¥–∏ –∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É (1.1.1.1)"
> ip route 0.0.0.0 0.0.0.0 1.1.1.1
> ```
> *–í —Ç–∞–±–ª–∏—Ü–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∑–≤–µ–∑–¥–æ—á–∫–æ–π (`S*`). Gateway of Last Resort.*

> [!NOTE]+ üß© 4. Next Hop vs Exit Interface
> –í –∫–∞—á–µ—Å—Ç–≤–µ "–ß–µ—Ä–µ–∑ –∫–æ–≥–æ" –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ IP —Å–æ—Å–µ–¥–∞, –∞ —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã—Ö–æ–¥–Ω–æ–π –ø–æ—Ä—Ç.
> 
> * **–ß–µ—Ä–µ–∑ IP (Next Hop):** `ip route 192.168.50.0 ... 10.1.1.2`
>     * *–ü–ª—é—Å:* –ù–∞–¥–µ–∂–Ω–æ. –†–æ—É—Ç–µ—Ä —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è.
>     * *–ú–∏–Ω—É—Å:* –†–æ—É—Ç–µ—Ä—É –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –¥–µ–ª–∞—Ç—å –ª–∏—à–Ω—é—é –ø—Ä–æ–≤–µ—Ä–∫—É (Recursive lookup).
> 
> * **–ß–µ—Ä–µ–∑ –ø–æ—Ä—Ç (Exit Interface):** `ip route 192.168.50.0 ... GigabitEthernet0/1`
>     * *–ü–ª—é—Å:* –ë—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º.
>     * *–ú–∏–Ω—É—Å:* –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–≤—è–∑—è—Ö "–¢–æ—á–∫–∞-–¢–æ—á–∫–∞" (Point-to-Point). –í Ethernet-—Å–µ—Ç—è—Ö (–≥–¥–µ –∑–∞ –ø–æ—Ä—Ç–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å 10 —Ä–æ—É—Ç–µ—Ä–æ–≤) —Ç–∞–∫ –¥–µ–ª–∞—Ç—å **–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**.
> 
> **Best Practice:** –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ IP-–∞–¥—Ä–µ—Å —Å–æ—Å–µ–¥–∞ (Next Hop).

> [!danger]+ ‚öîÔ∏è 5. –ü–ª–∞–≤–∞—é—â–∏–π –º–∞—Ä—à—Ä—É—Ç (Floating Static Route)
> –ß—Ç–æ —Ç–∞–∫–æ–µ —Ü–∏—Ñ—Ä–∞ –≤ –∫–æ–Ω—Ü–µ?
> `ip route 192.168.50.0 255.255.255.0 10.1.1.2 200`
> 
> –≠—Ç–æ **Administrative Distance (AD)**.
> * –£ —Å—Ç–∞—Ç–∏–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é AD = **1** (–°–∞–º–∞—è –Ω–∞–¥–µ–∂–Ω–∞—è, –∫—Ä—É—á–µ OSPF –∏ EIGRP).
> * –ï—Å–ª–∏ –º—ã –≤—Ä—É—á–Ω—É—é –ø–æ—Å—Ç–∞–≤–∏–º AD = **200**, –º–∞—Ä—à—Ä—É—Ç —Å—Ç–∞–Ω–µ—Ç "–ó–∞–ø–∞—Å–Ω—ã–º".
> 
> **–ö–µ–π—Å:**
> –û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª (–æ–ø—Ç–∏–∫–∞) —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ OSPF (AD 110).
> –ú—ã –ø–∏—à–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Ä—à—Ä—É—Ç —á–µ—Ä–µ–∑ –º–µ–¥–ª–µ–Ω–Ω—ã–π 4G-–º–æ–¥–µ–º –∏ —Å—Ç–∞–≤–∏–º –µ–º—É AD 200.
> * –ü–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç OSPF ‚Äî —Å—Ç–∞—Ç–∏–∫–∞ —Å–ø–∏—Ç (—Ç–∞–∫ –∫–∞–∫ 110 < 200).
> * –ö–∞–∫ —Ç–æ–ª—å–∫–æ –æ–ø—Ç–∏–∫–∞ –ø–∞–¥–∞–µ—Ç (OSPF –∏—Å—á–µ–∑–∞–µ—Ç) ‚Äî —Å—Ç–∞—Ç–∏–∫–∞ "–≤—Å–ø–ª—ã–≤–∞–µ—Ç" –∏ —Ç—Ä–∞—Ñ–∏–∫ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ 4G.

---

## üîó –°–≤—è–∑–∏
* **–ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å:** –ö–æ–º–∞–Ω–¥–∞ `show ip route` (–ø–æ–∫–∞–∂–µ—Ç –∫–æ–¥—ã `S` - Static).
* **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (OSPF, EIGRP), –∫–æ—Ç–æ—Ä—ã–µ –ø–∏—à—É—Ç —ç—Ç–∏ –º–∞—Ä—à—Ä—É—Ç—ã —Å–∞–º–∏.
* **–î–ª—è L3-—Å–≤–∏—Ç—á–∞:** –¢—Ä–µ–±—É–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏—è [[Cs - ip routing]].