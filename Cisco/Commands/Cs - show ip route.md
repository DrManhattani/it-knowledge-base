---
tags:
  - üåênetwork/cisco
  - üåênetwork/cisco/cmd
üí†Stack: üüß Cisco
üìü Device:
  - ‚óà Rtr
  - ‚åò Sw (L3)
üì∂ Mode:
  - ‚ö° Exec (Privileged)
üóÇÔ∏è Category:
  - üõ£Ô∏è Routing
  - üîç Verify
üìù Description: –í—ã–≤–æ–¥ —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (RIB - Routing Information Base). –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ä–æ—É—Ç–µ—Ä—É –ø—É—Ç–∏ –∫ —Å–µ—Ç—è–º.
‚ö° Alias: sh ip ro
üíª Command: show ip route
---
# üìñ –ì–ª–∞–≤–∞: –ß—Ç–µ–Ω–∏–µ –¢–∞–±–ª–∏—Ü—ã –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—É –º–∏—Ä–∞ –≥–ª–∞–∑–∞–º–∏ —Ä–æ—É—Ç–µ—Ä–∞.
–†–æ—É—Ç–µ—Ä –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –ø–∞–∫–µ—Ç—ã —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã. –ï—Å–ª–∏ —Å–µ—Ç–∏ –∑–¥–µ—Å—å –Ω–µ—Ç ‚Äî –ø–∞–∫–µ—Ç –ª–µ—Ç–∏—Ç –≤ –º—É—Å–æ—Ä–∫—É (Drop).

---

> [!INFO]+ üèóÔ∏è 1. –ê–Ω–∞—Ç–æ–º–∏—è –≤—ã–≤–æ–¥–∞ (–ö–∞–∫ —á–∏—Ç–∞—Ç—å?)
> –¢–∏–ø–∏—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
> 
> `O        192.168.10.0/24 [110/2] via 10.0.0.1, 00:00:05, GigabitEthernet0/0`
> 
> –†–∞–∑–±–µ—Ä–µ–º –ø–æ –∫–æ—Å—Ç–æ—á–∫–∞–º —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ:
> 
> 1.  –ö–æ–¥ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (O): –û—Ç–∫—É–¥–∞ —Ä–æ—É—Ç–µ—Ä —É–∑–Ω–∞–ª –æ–± —ç—Ç–æ–º –ø—É—Ç–∏?
>     * `C` (Connected) ‚Äî –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–∫–∞–±–µ–ª—å –≤–æ—Ç–∫–Ω—É—Ç). –°–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π.
>     * `L` (Local) ‚Äî –≠—Ç–æ IP-–∞–¥—Ä–µ—Å —Å–∞–º–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞ (/32).
>     * `S` (Static) ‚Äî –ê–¥–º–∏–Ω –ø—Ä–æ–ø–∏—Å–∞–ª —Ä—É–∫–∞–º–∏ (ip route).
>     * `O` (OSPF) ‚Äî –£–∑–Ω–∞–ª –æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ OSPF.
>     * `D` (EIGRP) ‚Äî –£–∑–Ω–∞–ª –æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ EIGRP (D ‚Äî –æ—Ç algorithm DUAL).
>     * `R` (RIP) ‚Äî –£–∑–Ω–∞–ª –æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ RIP.
> 
> 2.  –°–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (192.168.10.0/24): –ö—É–¥–∞ –º—ã —Ö–æ—Ç–∏–º –ø–æ–ø–∞—Å—Ç—å.
> 
> 3.  –†–µ–π—Ç–∏–Ω–≥ –º–∞—Ä—à—Ä—É—Ç–∞ [110/2]: –°–∞–º–∞—è –≤–∞–∂–Ω–∞—è —á–∞—Å—Ç—å –≤ —Å–∫–æ–±–∫–∞—Ö!
>     * –ü–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ (110) ‚Äî AD (Administrative Distance): –£—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É. –ß–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –ª—É—á—à–µ. (Static=1, OSPF=110, RIP=120).
>     * –í—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ (2) ‚Äî Metric: "–°—Ç–æ–∏–º–æ—Å—Ç—å" –ø—É—Ç–∏. –ß–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –∫–æ—Ä–æ—á–µ/–±—ã—Å—Ç—Ä–µ–µ –ø—É—Ç—å.
> 
> 4.  Next Hop (via 10.0.0.1): –ù–∞ –∫–∞–∫–æ–π IP-–∞–¥—Ä–µ—Å —Å–æ—Å–µ–¥–∞ –ø–µ—Ä–µ–∫–∏–Ω—É—Ç—å –ø–∞–∫–µ—Ç ("–°–ª–µ–¥—É—é—â–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞").
> 
> 5.  –¢–∞–π–º–µ—Ä (00:00:05): –ö–∞–∫ –¥–∞–≤–Ω–æ –º—ã —É–∑–Ω–∞–ª–∏ –æ–± —ç—Ç–æ–º –º–∞—Ä—à—Ä—É—Ç–µ.
> 
> 6.  –í—ã—Ö–æ–¥–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (GigabitEthernet0/0): –í –∫–∞–∫—É—é —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –¥—ã—Ä–∫—É –≤—ã–ø–ª—é–Ω—É—Ç—å –ø–∞–∫–µ—Ç.

> [!NOTE]+ üß© 2. Gateway of Last Resort (–®–ª—é–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –Ω–∞–¥–µ–∂–¥—ã)
> –í —Å–∞–º–æ–º –≤–µ—Ä—Ö—É –≤—ã–≤–æ–¥–∞ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å —Å—Ç—Ä–æ—á–∫–∞:
> `Gateway of last resort is 1.1.1.1 to network 0.0.0.0`
> 
> –≠—Ç–æ –∞–Ω–∞–ª–æ–≥ "–î–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ —à–ª—é–∑–∞" –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.
> –ï—Å–ª–∏ –ø—Ä–∏—à–µ–ª –ø–∞–∫–µ—Ç –Ω–∞ –∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä–æ–≥–æ –ù–ï–¢ –≤ —Å–ø–∏—Å–∫–µ –Ω–∏–∂–µ, —Ä–æ—É—Ç–µ—Ä –æ—Ç–ø—Ä–∞–≤–∏—Ç –µ–≥–æ —Å—é–¥–∞.
> * –û–±—ã—á–Ω–æ —ç—Ç–æ –º–∞—Ä—à—Ä—É—Ç –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç (–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É).

> [!TIP] üîç 3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–ß—Ç–æ–±—ã –Ω–µ –ª–∏—Å—Ç–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–Ω–∏)
> –ù–∞ –±–æ–ª—å—à–∏—Ö —Ä–æ—É—Ç–µ—Ä–∞—Ö —Ç–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å 10 000 —Å—Ç—Ä–æ–∫. –ò—Å–∫–∞—Ç—å –≥–ª–∞–∑–∞–º–∏ –¥–æ–ª–≥–æ.
> 
> –ê. –ü–æ–∫–∞–∑–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É IP:
> –°–∞–º—ã–π –ø–æ–ª–µ–∑–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç. –†–æ—É—Ç–µ—Ä —Å–∞–º —Å—ã–º–∏—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–∏—Å–∫–∞.
> ```bash
> R1# show ip route 8.8.8.8
> Routing entry for 0.0.0.0/0, supernet
> Known via "static", distance 1...
> ```
> 
> –ë. –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏–∫—É:
> ```bash
> R1# show ip route static
> ```
> 
> –í. –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ OSPF:
> ```bash
> R1# show ip route ospf
> ```

> [!danger]+ ‚öîÔ∏è 4. –ü—Ä–∞–≤–∏–ª–æ Longest Match (–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!)
> –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –µ—Å—Ç—å –¥–≤–∞ –º–∞—Ä—à—Ä—É—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Ö–æ–¥—è—Ç –ø–æ–¥ –∞–¥—Ä–µ—Å –ø–∞–∫–µ—Ç–∞?
> 
> * –ú–∞—Ä—à—Ä—É—Ç –ê: `192.168.10.0/24` (–í–µ—Å—å –æ—Ç–¥–µ–ª) -> –∏–¥—Ç–∏ –Ω–∞–ª–µ–≤–æ.
> * –ú–∞—Ä—à—Ä—É—Ç –ë: `192.168.10.5/32` (–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–ø) -> –∏–¥—Ç–∏ –Ω–∞–ø—Ä–∞–≤–æ.
> 
> –ü–∞–∫–µ—Ç –Ω–∞ 192.168.10.5 –ø–æ–π–¥–µ—Ç –ø–æ –ú–∞—Ä—à—Ä—É—Ç—É –ë.
> –†–æ—É—Ç–µ—Ä –≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ—Ç —Å–∞–º—É—é —Ç–æ—á–Ω—É—é (–¥–ª–∏–Ω–Ω—É—é) –º–∞—Å–∫—É. /32 —Ç–æ—á–Ω–µ–µ, —á–µ–º /24.
> *Administrative Distance –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –≤–∞–∂–Ω–∞! AD —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–±—Å–æ–ª—é—Ç–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–µ—Ç–µ–π.*

---

## üîó –°–≤—è–∑–∏
* **–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å:** –ò—Å–ø–æ–ª—å–∑—É–µ–º [[Cs - ip route | ip route]].
* **–ï—Å–ª–∏ –ø—É—Å—Ç–æ:** –ü—Ä–æ–≤–µ—Ä—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–∏–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ [[Cs - show ip interface brief]].
* **–ï—Å–ª–∏ L3-—Å–≤–∏—Ç—á:** –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω [[Cs - ip routing]].