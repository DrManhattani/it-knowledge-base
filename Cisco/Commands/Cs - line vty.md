---
tags:
  - üåênetwork/cisco
  - üåênetwork/cisco/cmd
üí†Stack: üüß Cisco
üìü Device:
  - ‚óà Rtr
  - ‚åò Sw
üì∂ Mode:
  - ‚öôÔ∏è Config
üóÇÔ∏è Category:
  - üîå Lines
  - üïπÔ∏è Mgmt
üìù Description: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –ª–∏–Ω–∏–π (—Å–µ—Å—Å–∏–π) –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞. –†–∞–∑–±–æ—Ä –Ω—É–º–µ—Ä–∞—Ü–∏–∏ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤.
‚ö° Alias: line vty
üíª Command: line vty
---
# üí° –û–ø–∏—Å–∞–Ω–∏–µ
> [!SUMMARY] –°—É—Ç—å
> **VTY (Virtual Teletype)** ‚Äî —ç—Ç–æ –Ω–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –¥—ã—Ä–∫–∏, –∞ **–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–ª–æ—Ç—ã** –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
> –ö–æ–≥–¥–∞ —Ç—ã –≤—Ö–æ–¥–∏—à—å –Ω–∞ —Ä–æ—É—Ç–µ—Ä —á–µ—Ä–µ–∑ SSH/Telnet, –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ IOS –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ "—Ä–æ–∂–∞–µ—Ç" –¥–ª—è —Ç–µ–±—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
> 
> –ö–æ–º–∞–Ω–¥–∞ `line vty` –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –¥–ª—è —ç—Ç–∏—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π.

---

> [!INFO]+ üé∞ 1. –ì–ª—É–±–æ–∫–∏–π —Ä–∞–∑–±–æ—Ä: –ß—Ç–æ —Ç–∞–∫–æ–µ —Ü–∏—Ñ—Ä—ã 0 4?
> –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ VTY ‚Äî —ç—Ç–æ **–ê–≤—Ç–æ–ø–∞—Ä–∫–æ–≤–∫–∞** –≤–Ω—É—Ç—Ä–∏ —Ä–æ—É—Ç–µ—Ä–∞.
> 
> * **–¶–∏—Ñ—Ä—ã** ‚Äî —ç—Ç–æ –Ω–æ–º–µ—Ä–∞ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç.
> * **–î–∏–∞–ø–∞–∑–æ–Ω** ‚Äî –∫–æ–º–∞–Ω–¥–∞ `line vty X Y` –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –º–µ—Å—Ç–∞ —Å –Ω–æ–º–µ—Ä–∞ X –ø–æ –Ω–æ–º–µ—Ä Y –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ.
> 
> **–†–∞–∑–±–æ—Ä `line vty 0 4`:**
> –≠—Ç–æ –∑–Ω–∞—á–∏—Ç: *"–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–µ—Å—Ç–∞ ‚Ññ0, ‚Ññ1, ‚Ññ2, ‚Ññ3 –∏ ‚Ññ4"*.
> –ò—Ç–æ–≥–æ: **5 –º–µ—Å—Ç** (5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π).
> 
> **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–∏–Ω–∞–º–∏–∫–µ:**
> 1.  –ê–¥–º–∏–Ω **–ê–ª–µ–∫—Å–µ–π** –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ SSH. –†–æ—É—Ç–µ—Ä –∏—â–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ. –ú–µ—Å—Ç–æ ‚Ññ0 —Å–≤–æ–±–æ–¥–Ω–æ? –î–∞.
>     * –ê–ª–µ–∫—Å–µ–π –∑–∞–Ω–∏–º–∞–µ—Ç **VTY 0**.
> 2.  –ê–¥–º–∏–Ω **–ë–æ—Ä–∏—Å** –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Å–ª–µ–¥–æ–º. –ú–µ—Å—Ç–æ ‚Ññ0 –∑–∞–Ω—è—Ç–æ. –ú–µ—Å—Ç–æ ‚Ññ1 —Å–≤–æ–±–æ–¥–Ω–æ? –î–∞.
>     * –ë–æ—Ä–∏—Å –∑–∞–Ω–∏–º–∞–µ—Ç **VTY 1**.
> 3.  –ê–¥–º–∏–Ω **–í–∞—Å–∏–ª–∏–π**... –∑–∞–Ω–∏–º–∞–µ—Ç **VTY 2**.
> ...
> 4.  –•–∞–∫–µ—Ä **–ì—Ä–∏—à–∞** –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–π—Ç–∏ —à–µ—Å—Ç—ã–º. –ú–µ—Å—Ç–∞ 0-4 –∑–∞–Ω—è—Ç—ã.
>     * –†–æ—É—Ç–µ—Ä: *"Connection refused"* (–ú–µ—Å—Ç –Ω–µ—Ç).
> 
> 

> [!danger]+ üí£ 2. –õ–æ–≤—É—à–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: "–°–∫—Ä—ã—Ç—ã–µ –ª–∏–Ω–∏–∏" (–û–ß–ï–ù–¨ –í–ê–ñ–ù–û)
> –≠—Ç–æ —Ç–æ, –Ω–∞ —á–µ–º –≥–æ—Ä—è—Ç –¥–∞–∂–µ –æ–ø—ã—Ç–Ω—ã–µ –∏–Ω–∂–µ–Ω–µ—Ä—ã.
> 
> * **–ù–∞ –†–æ—É—Ç–µ—Ä–∞—Ö:** –û–±—ã—á–Ω–æ –≤—Å–µ–≥–æ 5 –ª–∏–Ω–∏–π (0‚Äì4). –ö–æ–º–∞–Ω–¥–∞ `line vty 0 4` –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—ë. –í—Å—ë –æ–∫.
> * **–ù–∞ –ö–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞—Ö (Cisco 2960/3xxx):** –û–±—ã—á–Ω–æ **16 –ª–∏–Ω–∏–π** (0‚Äì15).
> 
> **–°—Ü–µ–Ω–∞—Ä–∏–π –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ—ã:**
> 1.  –¢—ã –ø–∏—à–µ—à—å –ø–æ –ø—Ä–∏–≤—ã—á–∫–µ: `line vty 0 4`, –≤–∫–ª—é—á–∞–µ—à—å —Ç–∞–º `transport input ssh` (–∑–∞—â–∏—Ç–∞).
> 2.  –õ–∏–Ω–∏–∏ **5‚Äì15** –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ (–≤ –¥–µ—Ñ–æ–ª—Ç–µ).
> 3.  **–ê –≤ –¥–µ—Ñ–æ–ª—Ç–µ –Ω–∞ —Å—Ç–∞—Ä—ã—Ö IOS –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å Telnet –±–µ–∑ –ø–∞—Ä–æ–ª—è –∏–ª–∏ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏!**
> 4.  –•–∞–∫–µ—Ä –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç 6 —Å–µ—Å—Å–∏–π –ø–æ–¥—Ä—è–¥. –ü–µ—Ä–≤—ã–µ 5 –æ—Ç–±–∏–≤–∞—é—Ç—Å—è (—Ç–∞–∫ –∫–∞–∫ —Ç–∞–º SSH), –∞ 6-—è —Å–µ—Å—Å–∏—è –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ **VTY 5**, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã—Ç –Ω–∞—Ä–∞—Å–ø–∞—à–∫—É.
> 
> **‚úÖ –ü—Ä–∞–≤–∏–ª–æ:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π, —Å–∫–æ–ª—å–∫–æ –ª–∏–Ω–∏–π –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (`show line`) –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π **–í–ï–°–¨** –¥–∏–∞–ø–∞–∑–æ–Ω.
> * –î–ª—è —Å–≤–∏—Ç—á–µ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç: `line vty 0 15`.

> [!NOTE]- üíª 3. –°–∏–Ω—Ç–∞–∫—Å–∏—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
> –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∏—Ö –ø–æ —á–∞—Å—Ç—è–º, –Ω–æ –ª—É—á—à–µ —Å—Ä–∞–∑—É –≤—Å–µ.
> 
> ```bash
> ! –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–≤—ã—Ö 5 –ª–∏–Ω–∏–π
> line vty 0 4
>  (–∫–æ–º–∞–Ω–¥—ã)
> 
> ! –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è (–¥–ª—è —Å–≤–∏—Ç—á–µ–π)
> line vty 5 15
>  (–∫–æ–º–∞–Ω–¥—ã)
> 
> ! –ò–ª–∏ —Å—Ä–∞–∑—É –≤—Å–µ—Ö —Å–∫–æ–ø–æ–º (Best Practice)
> line vty 0 15
>  (–∫–æ–º–∞–Ω–¥—ã)
> ```

> [!danger] ‚öîÔ∏è 4. –ì–ª–∞–≤–Ω—ã–π –≤—ã–±–æ—Ä: Telnet vs SSH
> –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é VTY –ª–∏–Ω–∏–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ Telnet, –∏ SSH (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Ä—Å–∏–∏ IOS). –í—ã **–æ–±—è–∑–∞–Ω—ã** —ç—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `transport input`.
> 
> | –ü—Ä–æ—Ç–æ–∫–æ–ª | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã | –í–µ—Ä–¥–∏–∫—Ç |
> | :--- | :--- | :--- | :--- |
> | **Telnet** | –ü—Ä–æ—Å—Ç–æ–π, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º "—É—Ç—é–≥–µ". | **–î—ã—Ä—è–≤—ã–π.** –ü–∞—Ä–æ–ª–∏ –∏ –∫–æ–º–∞–Ω–¥—ã –ª–µ—Ç—è—Ç –ø–æ —Å–µ—Ç–∏ –æ—Ç–∫—Ä—ã—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º. –õ—é–±–æ–π —Ö–∞–∫–µ—Ä –≤ Wi-Fi —Å–µ—Ç–∏ —É–≤–∏–¥–∏—Ç –≤–∞—à –ø–∞—Ä–æ–ª—å. | ‚õî **–ó–∞–ø—Ä–µ—Ç–∏—Ç—å** |
> | **SSH** | **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ.** –ù–∏–∫—Ç–æ –Ω–µ –ø–æ–¥—Å–º–æ—Ç—Ä–∏—Ç –ø–∞—Ä–æ–ª—å. | –¢—Ä–µ–±—É–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `hostname`/`domain-name`. | ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** |

> [!NOTE]- ‚öôÔ∏è 5. –ö–æ–º–∞–Ω–¥–∞ `transport input` (–§–µ–π—Å-–∫–æ–Ω—Ç—Ä–æ–ª—å)
> –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–≤–æ–¥–∏—Ç—Å—è –í–ù–£–¢–†–ò —Ä–µ–∂–∏–º–∞ `line vty`. –û–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç —Ä–æ—É—Ç–µ—Ä—É, –∫–∞–∫–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –ø—É—Å–∫–∞—Ç—å.
> 
> * `transport input ssh` ‚Äî **(–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)** –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ SSH. Telnet –±—É–¥–µ—Ç –æ—Ç–±–∏–≤–∞—Ç—å—Å—è.
> * `transport input telnet` ‚Äî –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ Telnet.
> * `transport input all` ‚Äî –ü—É—Å–∫–∞—Ç—å –≤—Å–µ—Ö (–û–ø–∞—Å–Ω–æ).
> * `transport input none` ‚Äî –ó–∞–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –≤–æ–æ–±—â–µ (–ù–∏–∫—Ç–æ –Ω–µ –∑–∞–π–¥–µ—Ç).

> [!example]+ üöÄ 6. –ü—Ä–∏–º–µ—Ä —ç—Ç–∞–ª–æ–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Copy-Paste)
> –≠—Ç–æ—Ç –∫–æ–Ω—Ñ–∏–≥ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –¥—ã—Ä—ã (–∏ 0-4, –∏ 5-15) –∏ –ø—Ä–∏–Ω—É–∂–¥–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH.
> 
> ```bash
> ! 1. –ó–∞—Ö–æ–¥–∏–º –≤–æ –í–°–ï –ª–∏–Ω–∏–∏ —Å—Ä–∞–∑—É
> line vty 0 15
> 
> ! 2. –¢—Ä–µ–±—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —é–∑–µ—Ä–∞ (admin/secret)
>  login local
> 
> ! 3. –†–∞–∑—Ä–µ—à–∞–µ–º –¢–û–õ–¨–ö–û –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏–π SSH
>  transport input ssh
> 
> ! 4. –ß—Ç–æ–±—ã –∫–æ–Ω—Å–æ–ª—å –Ω–µ —Ä–∞–∑—Ä—ã–≤–∞–ª–∞ –Ω–∞–±—Ä–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –ª–æ–≥–∞–º–∏
>  logging synchronous
> 
> ! 5. –í—ã–∫–∏–¥—ã–≤–∞—Ç—å –∞–¥–º–∏–Ω–∞, –µ—Å–ª–∏ –æ–Ω –æ—Ç–æ—à–µ–ª –Ω–∞ 30 –º–∏–Ω (Security)
>  exec-timeout 30 0
> ```

---

## üîó –°–≤—è–∑–∏
* **–§—É–Ω–¥–∞–º–µ–Ω—Ç:** [[Cs - 02 Authentification | Authentification]] (–ü–æ—á–µ–º—É SSH —Ç—Ä–µ–±—É–µ—Ç `login local`)
* **–ö–æ–≥–æ –ø—É—Å–∫–∞–µ–º:** [[Cs - username | username]]
* **–§–∏–∑–∏—á–µ—Å–∫–∏–π –±—Ä–∞—Ç:** [[Cs - line console | line console]]
* **–ö–ª—é—á–∏ –æ—Ç –¥–≤–µ—Ä–∏:** [[Cs - crypto key generate rsa]]