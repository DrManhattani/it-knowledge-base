---
tags:
  - üåê/cisco
  - üåê/cisco/cmd
üí†Stack: üüß Cisco
üìü Device:
  - ‚óà Rtr
  - ‚åò Sw
üì∂ Mode:
  - ‚öôÔ∏è Config
üóÇÔ∏è Category:
  - üõ°Ô∏è Sec
  - üïπÔ∏è Mgmt
üìù Description: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (AAA New Model) –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø–∏—Å–∫–æ–≤ –º–µ—Ç–æ–¥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
‚ö° Alias: aaa
üíª Command: aaa new-model
---

# üìñ –ì–ª–∞–≤–∞: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ AAA (Authentication, Authorization, Accounting)

–ö–æ–º–∞–Ω–¥–∞ `aaa new-model` ‚Äî —ç—Ç–æ "—Ä—É–±–∏–ª—å–Ω–∏–∫", –∫–æ—Ç–æ—Ä—ã–π –º–µ–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã –º–æ–∑–≥–∞ —Ä–æ—É—Ç–µ—Ä–∞.
–í —Å—Ç–∞—Ä–æ–π –º–æ–¥–µ–ª–∏ (Old Model) –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –±—ã–ª–∞ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω–æ–π: –æ–¥–∏–Ω –ø–∞—Ä–æ–ª—å –Ω–∞ –ª–∏–Ω–∏—é –∏–ª–∏ –ø—Ä–æ—Å—Ç–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞.
–í –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏ (New Model) –º—ã –ø–æ–ª—É—á–∞–µ–º –≥–∏–±–∫–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Ä–∞–∑–¥–µ–ª—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—ã (ISE, ACS, Radius).

–ë–µ–∑ –≤–≤–æ–¥–∞ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å `aaa ...`) –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä—ã—Ç—ã –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.

---

> [!INFO]+ üèóÔ∏è 1. –¢—Ä–∏ –∫–∏—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Theory)
> AAA ‚Äî —ç—Ç–æ –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–∞ —Ç—Ä–µ—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è `new-model` –≤—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ –∏—Ö –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏.
> 
> | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–æ–ø—Ä–æ—Å | –ê–Ω–∞–ª–æ–≥–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
> | :--- | :--- | :--- | :--- |
> | **A**uthentication | *"–¢—ã –∫—Ç–æ?"* | **–ü–∞—Å–ø–æ—Ä—Ç** | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—á–Ω–æ—Å—Ç–∏ (–õ–æ–≥–∏–Ω + –ü–∞—Ä–æ–ª—å). –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–Ω–Ω–æ —Ç–æ—Ç, –∑–∞ –∫–æ–≥–æ —Å–µ–±—è –≤—ã–¥–∞–µ—Ç. |
> | **A**uthorization | *"–ß—Ç–æ —Ç–µ–±–µ –º–æ–∂–Ω–æ?"* | **–í–∏–∑–∞ / –î–æ–ø—É—Å–∫** | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞. –ú–æ–∂–Ω–æ –ª–∏ —ç—Ç–æ–º—É —é–∑–µ—Ä—É –≤–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `reload`? –ö–∞–∫–æ–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π (0-15) –µ–º—É –≤—ã–¥–∞—Ç—å? |
> | **A**ccounting | *"–ß—Ç–æ —Ç—ã –Ω–∞—Ç–≤–æ—Ä–∏–ª?"* | **–í–∏–¥–µ–æ–∫–∞–º–µ—Ä–∞** | –ñ—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π. –ó–∞–ø–∏—Å—å —Ç–æ–≥–æ, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—à–µ–ª, –∫–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤–≤–µ–ª –∏ –∫–æ–≥–¥–∞ –≤—ã—à–µ–ª. |
> 
> *–í "–°—Ç–∞—Ä–æ–π –º–æ–¥–µ–ª–∏" —ç—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –±—ã–ª–∏ —Å–º–µ—à–∞–Ω—ã. –í "–ù–æ–≤–æ–π" –≤—ã –º–æ–∂–µ—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä, –∞ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å ‚Äî —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π.*

> [!danger]+ üß† 2. –°–ø–∏—Å–∫–∏ –º–µ—Ç–æ–¥–æ–≤ (Method Lists) ‚Äî –°–µ—Ä–¥—Ü–µ AAA
> –≠—Ç–æ —Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –Ω–æ —Å–∞–º–∞—è –º–æ—â–Ω–∞—è —á–∞—Å—Ç—å.
> –†–æ—É—Ç–µ—Ä –Ω–µ –æ–±—è–∑–∞–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∫–∏. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤**.
> 
> **–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
> ```bash
> aaa authentication login <–ò–ú–Ø_–°–ü–ò–°–ö–ê> <–ú–ï–¢–û–î_1> <–ú–ï–¢–û–î_2> <–ú–ï–¢–û–î_3>
> ```
> 
> **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã (–ê–ª–≥–æ—Ä–∏—Ç–º):**
> 1.  –†–æ—É—Ç–µ—Ä –ø—Ä–æ–±—É–µ—Ç **–ú–µ—Ç–æ–¥ 1** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –°–µ—Ä–≤–µ—Ä TACACS+).
> 2.  –ï—Å–ª–∏ –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª "OK" -> –í—Ö–æ–¥ —Ä–∞–∑—Ä–µ—à–µ–Ω.
> 3.  –ï—Å–ª–∏ –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å" -> **–°–¢–û–ü.** –í—Ö–æ–¥ –∑–∞–ø—Ä–µ—â–µ–Ω. (–ö –ú–µ—Ç–æ–¥—É 2 –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–º!).
> 4.  –ï—Å–ª–∏ –°–µ—Ä–≤–µ—Ä **–ù–ï –û–¢–í–ï–ß–ê–ï–¢** (Timeout/–û—à–∏–±–∫–∞ —Å–µ—Ç–∏) -> –¢–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ —Ä–æ—É—Ç–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ **–ú–µ—Ç–æ–¥—É 2**.
> 
> *–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å: –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–≥–æ—Ä–µ–ª, –∞–¥–º–∏–Ω —Å–º–æ–∂–µ—Ç –∑–∞–π—Ç–∏ –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∞–≤–∞—Ä–∏–π–Ω–æ–º—É –ø–∞—Ä–æ–ª—é.*

> [!NOTE]- ‚öîÔ∏è 3. –í—ã–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞: TACACS+ vs RADIUS
> –†–æ—É—Ç–µ—Ä –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –±–∞–∑—É —é–∑–µ—Ä–æ–≤ —É —Å–µ–±—è (`local`), –∞ –º–æ–∂–µ—Ç —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–µ—Ä. –î–ª—è –æ–±—â–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –Ω—É–∂–Ω—ã –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.
> 
> | –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | TACACS+ (Cisco) | RADIUS (Open Standard) |
> | :--- | :--- | :--- |
> | **–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç** | **TCP** (–ù–∞–¥–µ–∂–Ω—ã–π). | **UDP** (–ë—ã—Å—Ç—Ä—ã–π, –Ω–æ –º–æ–∂–µ—Ç —Ç–µ—Ä—è—Ç—å—Å—è). |
> | **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** | **–ü–æ–ª–Ω–æ–µ.** –®–∏—Ñ—Ä—É–µ—Ç –≤—Å—ë —Ç–µ–ª–æ –ø–∞–∫–µ—Ç–∞ (–ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, –∫–æ–º–∞–Ω–¥—ã). | **–ß–∞—Å—Ç–∏—á–Ω–æ–µ.** –®–∏—Ñ—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –õ–æ–≥–∏–Ω –∏ –∞—Ç—Ä–∏–±—É—Ç—ã –ª–µ—Ç—è—Ç –æ—Ç–∫—Ä—ã—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º. |
> | **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | –†–∞–∑–¥–µ–ª—è–µ—Ç AA –∏ A. (–ì–∏–±–∫–æ). | –û–±—ä–µ–¥–∏–Ω—è–µ—Ç Authentication –∏ Authorization. (–ñ–µ—Å—Ç–∫–æ). |
> | **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ** | **Device Admin.** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã–º –∂–µ–ª–µ–∑–æ–º. | **Network Access.** –î–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Wi-Fi, VPN). |
> | **–í–µ—Ä–¥–∏–∫—Ç** | ‚úÖ –í—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤. | ‚ö†Ô∏è –í—ã–±–æ—Ä –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —é–∑–µ—Ä–æ–≤. |

> [!NOTE]- ‚öôÔ∏è 4. –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (Configuration Workflow)
> 
> **–®–∞–≥ –ê. –í–∫–ª—é—á–µ–Ω–∏–µ**
> ```bash
> R1(config)# aaa new-model
> ```
> 
> **–®–∞–≥ –ë. –£–∫–∞–∑–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ (–ö—É–¥–∞ —Å—Ç—É—á–∞—Ç—å)**
> ```bash
> R1(config)# tacacs-server host 192.168.10.5 key MySecretKey
> ```
> *(–í –Ω–æ–≤—ã—Ö IOS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `tacacs server <NAME>`)*.
> 
> **–®–∞–≥ –í. –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–µ—Ç–æ–¥–æ–≤ (–ü—Ä–∞–≤–∏–ª–∞)**
> –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ —Å –∏–º–µ–Ω–µ–º `default`. –û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –ª–∏–Ω–∏—è–º (Console, VTY), –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–æ –∏–Ω–æ–µ.
> ```bash
> R1(config)# aaa authentication login default group tacacs+ local
> ```
> *–ü–µ—Ä–µ–≤–æ–¥: "–°–Ω–∞—á–∞–ª–∞ —Å–ø—Ä–æ—Å–∏ –≥—Ä—É–ø–ø—É —Å–µ—Ä–≤–µ—Ä–æ–≤ TACACS+. –ï—Å–ª–∏ –æ–Ω–∏ –º–µ—Ä—Ç–≤—ã ‚Äî —Å–º–æ—Ç—Ä–∏ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É".*
> 
> **–®–∞–≥ –ì. (–ï—Å–ª–∏ –Ω—É–∂–Ω–æ) –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ê–∫–∫–∞—É–Ω—Ç–∏–Ω–≥**
> ```bash
> ! –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: –ü—Ä–∏ –≤—Ö–æ–¥–µ —Å—Ä–∞–∑—É –¥–∞–≤–∞—Ç—å –ø—Ä–∞–≤–∞ (exec)
> aaa authorization exec default group tacacs+ local 
> ! –ê–∫–∫–∞—É–Ω—Ç–∏–Ω–≥: –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ç–∞—Ä—Ç –∏ —Å—Ç–æ–ø —Å–µ—Å—Å–∏–π
> aaa accounting exec default start-stop group tacacs+
> ```

> [!TIP] üõ°Ô∏è 5. –ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ "Black Door"
> –ù–∏–∫–æ–≥–¥–∞, –Ω–∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö –Ω–µ –ø–∏—à–∏—Ç–µ —Å–ø–∏—Å–æ–∫, —Å–æ—Å—Ç–æ—è—â–∏–π **—Ç–æ–ª—å–∫–æ** –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤:
> `aaa authentication login default group tacacs+` ‚ùå
> 
> –ï—Å–ª–∏ –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º —É–ø–∞–¥–µ—Ç, **–Ω–∏–∫—Ç–æ** –Ω–µ —Å–º–æ–∂–µ—Ç –∑–∞–π—Ç–∏ –Ω–∞ —Ä–æ—É—Ç–µ—Ä. –í—ã –∑–∞–ø—Ä–µ—Ç–µ –∫–ª—é—á–∏ –≤–Ω—É—Ç—Ä–∏ —Å–µ–π—Ñ–∞.
> **–í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π—Ç–µ** `local` **–≤ –∫–æ–Ω—Ü–µ:**
> `aaa authentication login default group tacacs+ local` ‚úÖ

---

## üîó –°–≤—è–∑–∏
* **–ó–∞–≤–∏—Å–∏—Ç –æ—Ç:** [[Cs - username | username]] (–ú–µ—Ç–æ–¥ `local` —Å—Å—ã–ª–∞–µ—Ç—Å—è —Å—é–¥–∞).
* **–ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è:** –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ [[Cs - line vty  | line vty]].
* **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∞–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (Cisco ISE / ACS) ‚Äî —ç—Ç–æ —É–∂–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è –±–æ–ª—å—à–∞—è —Ç–µ–º–∞.