---
tags:
  - ๐/cisco
  - ๐/cisco/cmd
๐ Stack: ๐ง Cisco
๐ Device:
  - โ Sw (L3)
  - โ Rtr
๐ถ Mode:
  - โ๏ธ Config
๐๏ธ Category:
  - ๐ Setup
  - ๐๏ธ Architecture
๐ Description: ะะบัะธะฒะฐัะธั ะฟัะพัะตััะฐ ะผะฐัััััะธะทะฐัะธะธ OSPF. ะัะฑะพั Process ID ะธ ะธะฝะธัะธะฐะปะธะทะฐัะธั ะฑะฐะทั ะดะฐะฝะฝัั LSDB.
โก Alias: ro ospf 1
๐ป Command: router ospf <process-id>
---
# ๐ ะะปะฐะฒะฐ: ะะฐะฟััะบ ะฟัะพัะตััะฐ OSPF

ะะพะผะฐะฝะดะฐ `router ospf` โ ััะพ ะฒัะพะดะฝะฐั ัะพัะบะฐ ะฒ ะบะพะฝัะธะณััะฐัะธั ะดะธะฝะฐะผะธัะตัะบะพะน ะผะฐัััััะธะทะฐัะธะธ.
ะ ะพัะปะธัะธะต ะพั ััะฐัะธะบะธ (`ip route`), ะทะดะตัั ะผั ะทะฐะฟััะบะฐะตะผ **ะฐะบัะธะฒะฝัะน ะฟัะพัะตัั** (ะดะตะผะพะฝ), ะบะพัะพััะน ะฑัะดะตั ะฟะพััะตะฑะปััั CPU ะธ ะฟะฐะผััั ะดะปั ะฟะพัััะพะตะฝะธั ะณัะฐัะฐ ัะตัะธ.

---

> [!NOTE]+ ๐๏ธ 1. ะฅะฐัะฐะบัะตัะธััะธะบะธ ะธ ะกะธะฝัะฐะบัะธั
> | ะะฐัะฐะผะตัั | ะะฝะฐัะตะฝะธะต |
> | :--- | :--- |
> | **ะะดะต ะฒะฒะพะดะธัั** | `(config)#` (Global Configuration) |
> | **ะัะณัะผะตะฝั** | `<process-id>` (ะงะธัะปะพ ะพั **1** ะดะพ **65535**) |
> | **ะะตะทัะปััะฐั** | ะะตัะตัะพะด ะฒ ัะตะถะธะผ `(config-router)#` |
> | **ะะฝะพะถะตััะฒะตะฝะฝะพััั** | ะะฐ ะพะดะฝะพะผ ัะพััะตัะต ะผะพะถะฝะพ ะทะฐะฟัััะธัั **ะฝะตัะบะพะปัะบะพ** ะฟัะพัะตััะพะฒ OSPF (ะฝะฐะฟัะธะผะตั, `router ospf 1` ะดะปั ะฒะฝัััะตะฝะฝะตะน ัะตัะธ ะธ `router ospf 100` ะดะปั DMZ). ะะพ ะพะฝะธ ะฝะต ะฑัะดัั ะพะฑะผะตะฝะธะฒะฐัััั ะผะฐัััััะฐะผะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ. |

> [!danger]+ ๐งฉ 2. ะะปัะฑะพะบะธะน ัะฐะทะฑะพั: Process ID
> ะกะฐะผัะน ัะฐัััะน ะฒะพะฟัะพั ะฝะฐ ัะพะฑะตัะตะดะพะฒะฐะฝะธัั: *"ะัะถะฝะพ ะปะธ, ััะพะฑั Process ID ัะพะฒะฟะฐะดะฐะป ะฝะฐ ะฒัะตั ัะพััะตัะฐั?"*
> 
> **ะัะฒะตั: ะะะข.**
> * ะ ะฟัะพัะพะบะพะปะต **EIGRP** ะฝะพะผะตั AS (Autonomous System) **ะพะฑัะทะฐะฝ** ัะพะฒะฟะฐะดะฐัั.
> * ะ ะฟัะพัะพะบะพะปะต **OSPF** ะฝะพะผะตั Process ID โ ััะพ **Locally Significant** (ะปะพะบะฐะปัะฝะพ ะทะฝะฐัะธะผัะน) ะฟะฐัะฐะผะตัั.
> 
> **ะงัะพ ััะพ ะทะฝะฐัะธั:**
> ะะพััะตัั R1 (Process ID 1) ะฐะฑัะพะปััะฝะพ ะฟะปะตะฒะฐัั, ะบะฐะบะพะน ID ั ัะพัะตะดะฐ R2 (ัะพัั 500, ัะพัั 10). Process ID ะฝะต ะฟะตัะตะดะฐะตััั ะฒ ะฟะฐะบะตัะฐั Hello. ะะฝ ะฝัะถะตะฝ ัะพะปัะบะพ ะพะฟะตัะฐัะธะพะฝะฝะพะน ัะธััะตะผะต ัะฐะผะพะณะพ ัะพััะตัะฐ, ััะพะฑั ะพัะปะธัะฐัั ะพะดะฝั ะฑะฐะทั ะดะฐะฝะฝัั ะพั ะดััะณะพะน.
> 
> **Best Practice:**
> ะะตัะผะพััั ะฝะฐ ัะพ, ััะพ ะฝะพะผะตัะฐ ะผะพะณัั ะฑััั ัะฐะทะฝัะผะธ, ะธะฝะถะตะฝะตัั ะฒัะตะณะดะฐ ะฝะฐัััะฐะธะฒะฐัั **ID = 1** ะฝะฐ ะฒัะตั ััััะพะนััะฒะฐั ะฒ ัะตัะธ. ะญัะพ ะดะตะปะฐะตััั ะธัะบะปััะธัะตะปัะฝะพ ะดะปั ัะดะพะฑััะฒะฐ ะฐะดะผะธะฝะธัััะธัะพะฒะฐะฝะธั ะธ ัะบัะธะฟัะพะฒ ะฐะฒัะพะผะฐัะธะทะฐัะธะธ.

> [!INFO]+ ๐ 3. ะัะฑะพั Router ID (RID)
> ะ ะผะพะผะตะฝั ะฒะฒะพะดะฐ ะบะพะผะฐะฝะดั `router ospf` ะฟัะพะธััะพะดะธั ะบัะธัะธัะตัะบะธ ะฒะฐะถะฝะพะต ัะพะฑััะธะต โ ัะพััะตั ะฒัะฑะธัะฐะตั ัะฒะพะต **ะะผั** (32-ะฑะธัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั).
> ะัะปะธ ั ัะพััะตัะฐ ะฝะตั RID, ะฟัะพัะตัั OSPF ะฝะต ะทะฐะฟัััะธััั.
> 
> **ะะปะณะพัะธัะผ ะฒัะฑะพัะฐ (Election):**
> 1.  **ะััะฝะพะน:** ะะพะผะฐะฝะดะฐ `router-id x.x.x.x` ะฒะฝัััะธ ะฟัะพัะตััะฐ. (ะกะฐะผัะน ะฒััะพะบะธะน ะฟัะธะพัะธัะตั).
> 2.  **Loopback:** ะกะฐะผัะน ะฑะพะปััะพะน IP ะฝะฐ loopback-ะธะฝัะตััะตะนัะฐั. (ะะฐะดะตะถะฝะพ, ัะฐะบ ะบะฐะบ loopback ะฝะต ะฟะฐะดะฐะตั).
> 3.  **Physical:** ะกะฐะผัะน ะฑะพะปััะพะน IP ะฝะฐ ะฐะบัะธะฒะฝัั ัะธะทะธัะตัะบะธั ะธะฝัะตััะตะนัะฐั. (ะะตะฝะฐะดะตะถะฝะพ, ะธะฝัะตััะตะนั ะผะพะถะตั ัะฟะฐััั).
> 
> *ะกะพะฒะตั: ะัะตะณะดะฐ ะทะฐะดะฐะฒะฐะนัะต RID ะฒัััะฝัั, ััะพะฑั ะปะพะณ-ัะฐะนะปั ะฑัะปะธ ัะธัะฐะตะผัะผะธ.*

> [!example]+ ๐ 4. ะะพะปะฝัะน ะฟัะธะผะตั ะธะฝะธัะธะฐะปะธะทะฐัะธะธ
> 
> **ะกัะตะฝะฐัะธะน:** ะะฐะฟััะบะฐะตะผ OSPF, ะถะตััะบะพ ะทะฐะดะฐะตะผ ะตะผั ะธะผั (RID) ะธ ะฟัะตะดะพัะฒัะฐัะฐะตะผ ัะปััะฐะนะฝัั ะพัะฟัะฐะฒะบั ะดะฐะฝะฝัั ะฒ ะปะพะบะฐะปัะฝัั ัะตัั.
> 
> ```bash
> ! 1. ะัะพะดะธะผ ะฒ ะณะปะพะฑะฐะปัะฝัะน ะบะพะฝัะธะณ
> configure terminal
> 
> ! 2. ะะฐะฟััะบะฐะตะผ ะฟัะพัะตัั (ID 1)
> router ospf 1
> 
> ! 3. (ะะฐะถะฝะพ) ะะตััะบะพ ะทะฐะดะฐะตะผ Router ID
>  router-id 1.1.1.1
> 
> ! 4. (Best Practice) ะะปะพะบะธััะตะผ ัะฐัััะปะบั Hello ะฝะฐ ะฒัะตั ะฟะพััะฐั ะฟะพ ัะผะพะปัะฐะฝะธั
> ! ะญัะพ ะทะฐัะธัะฐ: OSPF ะฑัะดะตั ัะฐะฑะพัะฐัั ัะพะปัะบะพ ัะฐะผ, ะณะดะต ะผั ัะฒะฝะพ ัะฐะทัะตัะธะผ
>  passive-interface default
> 
> ! 5. ะะฐะทัะตัะฐะตะผ OSPF ะฝะฐ ะฟะพััั ะบ ัะพัะตะดั
>  no passive-interface GigabitEthernet0/1
> ```

---

## ๐ ะกะฒัะทะธ
* **ะกะปะตะดัััะธะน ัะฐะณ:** ะะฑััะฒะปะตะฝะธะต ัะตัะตะน ัะตัะตะท ะบะพะผะฐะฝะดั [[Cs - network (OSPF)]].
* **ะะปััะตัะฝะฐัะธะฒะฐ:** ะะบะปััะตะฝะธะต OSPF ะฟััะผะพ ะฝะฐ ะธะฝัะตััะตะนัะต ัะตัะตะท `ip ospf 1 area 0` (ัะพะฒัะตะผะตะฝะฝัะน ะผะตัะพะด).
* **ะะธะฐะณะฝะพััะธะบะฐ:** [[Cs - show ip protocols]] (ะะพะบะฐะถะตั ะฐะบัะธะฒะฝัะน Process ID ะธ RID).