---
tags:
  - üêôgit/cmd
  - üêôgit/index
  - üêôgit
üí†Stack: üêô Git
üîß Level: üè∫ Porcelain
üåç Scope:
  - üìÅ Local
üõ°Ô∏è Risk: ‚úÖ Safe
üèπ Target Area: Index (Staging Area) üóÇÔ∏è
üìù Description: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–æ–º–º–∏—Ç–∞.
üíª Command: git add
---
# ‚ûï git add

> [!ABSTRACT] –°—É—Ç—å
> –ö–æ–º–∞–Ω–¥–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Ñ–∞–π–ª—ã –∏–∑ —Å—Ç–∞—Ç—É—Å–æ–≤ **Untracked** –∏ **Modified** –≤ —Å—Ç–∞—Ç—É—Å **Staged**. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏, –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç Git –≤—ã—á–∏—Å–ª—è–µ—Ç —Ö–µ—à –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ –±–∞–∑–µ –æ–±—ä–µ–∫—Ç–æ–≤.

---

> [!INFO] üîç 1. –û—Å–Ω–æ–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
> | ‚Ññ | –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
> | :-- | :--- | :--- |
> | 1 | `git add <file>` | –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª. |
> | 2 | `git add <dir>/` | –î–æ–±–∞–≤–∏—Ç—å –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏. |
> | 3 | `git add .` | –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ **—Ç–µ–∫—É—â–µ–π** –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –Ω–∏–∂–µ. |
> | 4 | `git add -A` | –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–Ω–¥–µ–∫—Å –≤—Å—ë, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (all), –≤–∫–ª—é—á–∞—è —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤. –¢.–µ. **–Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã** - –¥–æ–±–∞–≤–∏—Ç; **–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ** - –æ–±–Ω–æ–≤–∏—Ç; **—É–¥–∞–ª–µ–Ω–Ω—ã–µ**, –Ω–æ —Ä–∞–Ω–µ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ - –ø–æ–º–µ—Ç–∏—Ç –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ.|

> [!EXAMPLE] ‚ö° 2. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ (Pro-level)
> –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Ç—å –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω—ã–º –∏ –Ω–µ –º—É—Å–æ—Ä–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏–∏.
>
> | ‚Ññ | –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
> | :-- | :--- | :--- |
> | 1 | `git add -p` | **Patch mode.** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫—É—Å–∫–æ–≤ (hunks) –∫–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–æ–≤. |
> | 2 | `git add -u` | –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ **–∏–∑–º–µ–Ω–µ–Ω–∏—è** —É–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã). |
> | 3 | `git add -n` | **Dry run.** –ü–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã, –Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∏—Ö –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ. |

> [!DANGER] üóëÔ∏è 3. –û—Ç–º–µ–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (Unstaging)
> –ï—Å–ª–∏ —Ç—ã —Å–ª—É—á–∞–π–Ω–æ –¥–æ–±–∞–≤–∏–ª –ª–∏—à–Ω–µ–µ –≤ –∏–Ω–¥–µ–∫—Å.
>
> | ‚Ññ | –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
> | :-- | :--- | :--- |
> | 1 | `git restore --staged <file>` | –£–¥–∞–ª–∏—Ç —Ñ–∞–π–ª –∏–∑ –∏–Ω–¥–µ–∫—Å–∞, –Ω–æ –æ—Å—Ç–∞–≤–∏—Ç –µ–≥–æ –≤ —Å—Ç–∞—Ç—É—Å–µ **modified**|
> |*1.1*| `git restore --staged --source=HEAD <file>` | **–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–æ–º–∞–Ω–¥–µ** `git restore --staged <file>`<br>**–ß–µ—Ä–µ–∑** `--source` –º–æ–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫: `--source=HEAD~3` , `--source=origin/main`
> |*1.2*| `git restore <file>` | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞ –∏–∑ WD –∏ –∏–Ω–¥–µ–∫—Å–∞ –¥–æ –≤–µ—Ä—Å–∏–∏ –∏–Ω–¥–µ–∫—Å–∞ –∏–ª–∏ **HEAD** (–µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å –Ω–µ —É–∫–∞–∑–∞–Ω). –§–æ—Ä–º–∞–ª—å–Ω–æ –∑–∞–º–µ–Ω—è–µ—Ç –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞ –≤ WD –∏ –∏–Ω–¥–µ–∫—Å–µ –Ω–∞ –≤–µ—Ä—Å–∏—é –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ –∏–ª–∏ HEAD **(–±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ ‚Üí –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω–¥–µ–∫—Å –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)**. 
> | 2 | `git reset <file>` | –£–±—Ä–∞—Ç—å —Ñ–∞–π–ª –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ (–≤–µ—Ä–Ω—É—Ç—å –≤ **modified**), –Ω–µ —É–¥–∞–ª—è—è –ø—Ä–∞–≤–∫–∏. –°—Ç–∞—Ä—ã–π –∞–Ω–∞–ª–æ–≥ `git restore --staged <file>`|
> |3|`git rm --cached <file>`|–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –æ—Å—Ç–∞–≤–ª—è—è –µ–≥–æ –Ω–∞ –¥–∏—Å–∫–µ. –§–∞–π–ª –∏—Å–∫–ª—é—á–∏—Ç—Å—è –∏–∑ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–æ–º–º–∏—Ç–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –¥–æ–±–∞–≤–ª—è–ª—Å—è —Ä–∞–Ω–µ–µ. –§–∞–π–ª —Å—Ç–∞–Ω–µ—Ç **untracked** 

---
### üí° –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –º–∞–≥–∏—è (Deep Dive)

–ö–æ–≥–¥–∞ —Ç—ã –≤—ã–ø–æ–ª–Ω—è–µ—à—å `git add`, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç—Ä–∏ –≤–µ—â–∏:
1. Git –±–µ—Ä–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –∏ —Å–æ–∑–¥–∞–µ—Ç –¥–ª—è –Ω–µ–≥–æ **Blob** (–æ–±—ä–µ–∫—Ç –¥–∞–Ω–Ω—ã—Ö).
2. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è **SHA-1** —Ö–µ—à —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
3. Git –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ñ–∞–π–ª `.git/index`, —Å–≤—è–∑—ã–≤–∞—è –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å –Ω–æ–≤—ã–º —Ö–µ—à–µ–º.

> [!TIP] –ó–∞—á–µ–º –Ω—É–∂–µ–Ω `-p` (Patch mode)?
> –≠—Ç–æ –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –¥–µ–ª–∞—Ç—å **–∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã**. –ï—Å–ª–∏ —Ç—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ `main.py` –∏—Å–ø—Ä–∞–≤–∏–ª –±–∞–≥ –∏ –¥–æ–±–∞–≤–∏–ª –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é, `git add -p` –ø–æ–∑–≤–æ–ª–∏—Ç —Ç–µ–±–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–º–∏—Ç–∞, –ø—Ä–µ–¥–ª–∞–≥–∞—è –≤—ã–±—Ä–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–π –±–ª–æ–∫ –æ—Ç–¥–µ–ª—å–Ω–æ.

> [!INFO] **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?**
> 
> –¢—ã —Ü–µ–ª—ã–π —á–∞—Å –ø–∏—Å–∞–ª –∫–æ–¥ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ:
> 
> 1. –ò—Å–ø—Ä–∞–≤–∏–ª –±–∞–≥ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `A`.
>     
> 2. –î–æ–±–∞–≤–∏–ª –Ω–æ–≤—É—é —Ñ–∏—á—É –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `B`.
>     
> 3. –û—Å—Ç–∞–≤–∏–ª –≤—Ä–µ–º–µ–Ω–Ω—ã–π `print("!!!")` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.
>     
> 
> –° `-p` —Ç—ã –º–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å **–¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–º–∏—Ç–∞** (–±–∞–≥ –∏ —Ñ–∏—á—É) –∏ **–Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å** –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –º—É—Å–æ—Ä.
#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ä–µ–∂–∏–º–µ `-p`
–ö–æ–≥–¥–∞ —Ç—ã –∑–∞–ø—É—Å—Ç–∏—à—å `git add -p`, –ø–æ–¥ –∫–∞–∂–¥—ã–º –∫—É—Å–∫–æ–º –∫–æ–¥–∞ –ø–æ—è–≤—è—Ç—Å—è –±—É–∫–≤—ã `[y,n,q,a,d,s,e,?]`. –í–æ—Ç —á—Ç–æ –æ–Ω–∏ –∑–Ω–∞—á–∞—Ç:

| **–ö–æ–º–∞–Ω–¥–∞** | **–ö–ª–∞–≤–∏—à–∞** | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                     |
| ----------- | ----------- | -------------------------------------------------------------------------------- |
| **Yes**     | `y`         | –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –∫—É—Å–æ–∫ –≤ –∏–Ω–¥–µ–∫—Å.                                                    |
| **No**      | `n`         | –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å —ç—Ç–æ—Ç –∫—É—Å–æ–∫.                                                         |
| **Split**   | `s`         | –†–∞–∑–±–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∫—É—Å–æ–∫ –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ (–µ—Å–ª–∏ Git –≤–∏–¥–∏—Ç –º–µ–∂–¥—É –Ω–∏–º–∏ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏). |
| **Quit**    | `q`         | –í—ã–π—Ç–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ, —á—Ç–æ —É–∂–µ —É—Å–ø–µ–ª –≤—ã–±—Ä–∞—Ç—å.                                     |
| **All**     | `a`         | –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫—É—Å–∫–∏ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.                                |
| **Don't**   | `d`         | –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫—É—Å–∫–∏ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.                              |
| **Edit**    | `e`         | –û—Ç–∫—Ä—ã—Ç—å —ç—Ç–æ—Ç –∫—É—Å–æ–∫ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ –≤—Ä—É—á–Ω—É—é —É–¥–∞–ª–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏.                |

---
### üîó –°–≤—è–∑–∏
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:** [[Git/99 Commands/Git - git status| git status]]
- **–û–±–ª–∞—Å—Ç–∏ –≤ Git:** [[Git - 02 Areas | Areas]]
- **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** [[Git - git commit | git commit]]