---
tags:
  - üêôgit/cmd
  - üêôgit
  - üêôgit/restore
üí†Stack: üêô Git
üîß Level: üõ°Ô∏è Basic / ‚öîÔ∏è Middle
üåç Scope:
  - üìÅ Local (.git storage) -> üìÇ Working Directory / üì• Index
üõ°Ô∏è Risk: ‚ùå High (–ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ–Ω—ã)
üèπ Target Area: Undo changes & State recovery ‚è™
---
# üßπ git restore

> [!ABSTRACT] **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**
> 
> **git restore** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ —Ä–∞–±–æ—á–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ –∏–ª–∏ –∏–Ω–¥–µ–∫—Å–µ –¥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ –ò–Ω–¥–µ–∫—Å –∏–ª–∏ HEAD). –û–Ω–∞ –ø—Ä–∏—à–ª–∞ –Ω–∞ —Å–º–µ–Ω—É ¬´—Ñ–∞–π–ª–æ–≤–æ–π¬ª —á–∞—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—ã `git checkout`.

---
### üõ†Ô∏è –§–ª–∞–≥–∏ –∏ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–∞–±–ª–∏—Ü–µ

|**–ö–æ–º–∞–Ω–¥–∞ / –§–ª–∞–≥**|**–û–ø–∏—Å–∞–Ω–∏–µ**|**–ü—Ä–∏–º–µ—Ä**|
|---|---|---|
|`--source` (`-s`)|–£–∫–∞–∑—ã–≤–∞–µ—Ç ¬´–æ—Ç–∫—É–¥–∞¬ª –±—Ä–∞—Ç—å –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞ (–∫–æ–º–º–∏—Ç, –≤–µ—Ç–∫–∞ –∏–ª–∏ —Ç–µ–≥).|`git restore -s HEAD~2 file.txt`|
|`--staged` (`-S`)|–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–∞–π–ª –≤ **–ò–Ω–¥–µ–∫—Å–µ**. –ê–Ω–∞–ª–æ–≥ ¬´unstage¬ª.|`git restore --staged file.txt`|
|`--worktree` (`-W`)|–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–∞–π–ª –≤ **–†–∞–±–æ—á–µ–º –¥–µ—Ä–µ–≤–µ**. (–§–ª–∞–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).|`git restore file.txt`|
|`-p` (`--patch`)|–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º: –≤—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ (—Ö–∞–Ω–∫–æ–≤) –¥–ª—è –æ—Ç–∫–∞—Ç–∞.|`git restore -p app.js`|
|`--staged --worktree`|–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç —Ñ–∞–π–ª–∞ –∏ –≤ –∏–Ω–¥–µ–∫—Å–µ, –∏ –Ω–∞ –¥–∏—Å–∫–µ.|`git restore -S -W file.txt`|

---
### üîç –û—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

> [!QUESTION] **1. –í —á–µ–º –≥–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç **`git checkout`?
> 
> –î–æ 2019 –≥–æ–¥–∞ `checkout` –¥–µ–ª–∞–ª –≤—Å—ë: –ø–µ—Ä–µ–∫–ª—é—á–∞–ª –≤–µ—Ç–∫–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª —Ñ–∞–π–ª—ã. –≠—Ç–æ –ø—É—Ç–∞–ª–æ.
> 
> - `git switch` —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–µ—Ç–æ–∫.
>     
> - `git restore` —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –¥–ª—è **—Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤**.
>     
>     –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –≤—ã –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –≤–µ—Ç–∫—É —Å–ª—É—á–∞–π–Ω–æ, –∫–æ–≥–¥–∞ –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç–µ–ª–∏ –æ—Ç–∫–∞—Ç–∏—Ç—å –æ–ø–µ—á–∞—Ç–∫—É –≤ –∫–æ–Ω—Ñ–∏–≥–µ.
>     

> [!QUESTION] **2. –ß—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º (Source) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?**
> 
> –≠—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –≤—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ:
> 
> - –ï—Å–ª–∏ –≤—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ **–†–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥** (`--worktree`), –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –±—É–¥–µ—Ç **–ò–Ω–¥–µ–∫—Å**.
>     
> - –ï—Å–ª–∏ –≤—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ **–ò–Ω–¥–µ–∫—Å** (`--staged`), –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –±—É–¥–µ—Ç **HEAD**.
>     
> - –ï—Å–ª–∏ –≤—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ **–æ–±–∞ —Å—Ä–∞–∑—É**, –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –±—É–¥–µ—Ç **HEAD**.
>     

> [!QUESTION] **3. –ö–∞–∫ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?**
> 
> Git –Ω–∞—Ö–æ–¥–∏—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –∏—Å—Ç–æ—á–Ω–∏–∫–µ (–∫–æ–º–º–∏—Ç–µ –∏–ª–∏ –∏–Ω–¥–µ–∫—Å–µ) –Ω—É–∂–Ω—ã–π –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ **blob** (—Å–Ω–∏–º–æ–∫ —Ñ–∞–π–ª–∞), –≤—ã—á–∏—Å–ª—è–µ—Ç –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –≤ —Ü–µ–ª–µ–≤–æ–π –æ–±–ª–∞—Å—Ç–∏ (–¥–∏—Å–∫ –∏–ª–∏ —Ñ–∞–π–ª –∏–Ω–¥–µ–∫—Å–∞).
> 
> - **–í–∞–∂–Ω–æ:** –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `stash`, `restore` –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–º–º–∏—Ç–æ–≤. –≠—Ç–æ –ø—Ä—è–º–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ –ø–æ–≤–µ—Ä—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
>     

> [!QUESTION] **4. –ú–æ–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª?**
> 
> –î–∞. –ï—Å–ª–∏ –≤—ã —Å–ª—É—á–∞–π–Ω–æ —É–¥–∞–ª–∏–ª–∏ —Ñ–∞–π–ª —á–µ—Ä–µ–∑ `rm`, –Ω–æ –æ–Ω –µ—Å—Ç—å –≤ –∫–æ–º–º–∏—Ç–µ –∏–ª–∏ –∏–Ω–¥–µ–∫—Å–µ:
> 
> `git restore deleted_file.txt` ‚Äî Git —É–≤–∏–¥–∏—Ç, —á—Ç–æ —Ñ–∞–π–ª–∞ –Ω–µ—Ç –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –Ω–∞–π–¥–µ—Ç –µ–≥–æ –≤ –∏–Ω–¥–µ–∫—Å–µ –∏ ¬´–≤–æ—Å–∫—Ä–µ—Å–∏—Ç¬ª –µ–≥–æ.

---
### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ (Source -> Destination)

–ö–æ–º–∞–Ω–¥–∞ `restore` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞—Å–æ—Å, –ø–µ—Ä–µ–∫–∞—á–∏–≤–∞—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É —Ç—Ä–µ–º—è –¥–µ—Ä–µ–≤—å—è–º–∏:

1. **–ö–æ–º–º–∏—Ç (Source)** -> **–ò–Ω–¥–µ–∫—Å (Destination)**: `git restore --staged --source=HEAD~1 file.txt`
2. **–ò–Ω–¥–µ–∫—Å (Source)** -> **–†–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥ (Destination)**: `git restore file.txt`
3. **–ö–æ–º–º–∏—Ç (Source)** -> **–†–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥ (Destination)**: `git restore --source=master file.txt`

---
### ‚ùì –í–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏

> [!IMPORTANT] **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ Restore**
> 
> **1. –ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å** `git add .`**, –∏—Å–ø–æ–ª—å–∑—É—è** `restore`**?**
> 
> - _–û—Ç–≤–µ—Ç:_ `git restore --staged .`. –≠—Ç–æ —Å–±—Ä–æ—Å–∏—Ç —Ñ–∞–π–ª—ã –∏–∑ –∏–Ω–¥–µ–∫—Å–∞, –≤–µ—Ä–Ω—É–≤ –∏—Ö –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞ (HEAD), –Ω–æ –æ—Å—Ç–∞–≤–∏—Ç –≤—Å–µ –ø—Ä–∞–≤–∫–∏ –≤ —Å–∞–º–∏—Ö —Ñ–∞–π–ª–∞—Ö –Ω–∞ –¥–∏—Å–∫–µ.
>     
> 
> ---
> 
> **2. –ö–∞–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–æ—Å–∏—Ç—å —Ñ–∞–π–ª –¥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –¥—Ä—É–≥–æ–π –≤–µ—Ç–∫–∏?**
> 
> - _–û—Ç–≤–µ—Ç:_ `git restore --source=other-branch --staged --worktree path/to/file.js`. –≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç —Ñ–∞–π–ª –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º –≤–µ—Ä—Å–∏–∏ –≤ `other-branch` –∏ –≤ –∏–Ω–¥–µ–∫—Å–µ, –∏ –≤ —Ä–∞–±–æ—á–µ–π –ø–∞–ø–∫–µ.
>     
> 
> ---
> 
> **3. –ß—Ç–æ –±—É–¥–µ—Ç —Å –Ω–æ–≤—ã–º–∏ (untracked) —Ñ–∞–π–ª–∞–º–∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ** `git restore .`**?**
> 
> - _–û—Ç–≤–µ—Ç:_ –ù–∏—á–µ–≥–æ. `restore` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å **–æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–º–∏** –ø—É—Ç—è–º–∏. –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ. –ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –∏—Ö, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `git clean`.
>     
> 
> ---
> 
> **4. –ú–æ–∂–Ω–æ –ª–∏ ¬´–æ—Ç–∫–∞—Ç–∏—Ç—å¬ª –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∏–Ω–¥–µ–∫—Å?**
> 
> - _–û—Ç–≤–µ—Ç:_ –î–∞, —ç—Ç–æ —Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è: `git restore <file>`. –û–Ω–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞—Ç–∏—Ä–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫–µ –≤–µ—Ä—Å–∏–µ–π –∏–∑ –∏–Ω–¥–µ–∫—Å–∞.
>     
> 
> ---
> 
> **5. –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É** `git reset HEAD <file>` **–∏** `git restore --staged <file>`**?**
> 
> - _–û—Ç–≤–µ—Ç:_ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ ‚Äî –Ω–∏ –≤ —á–µ–º. `restore` –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –±–æ–ª–µ–µ —è–≤–Ω–æ –∏ —á–∏—Ç–∞–µ–º–æ. –í –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Git –∏–º–µ–Ω–Ω–æ `restore` —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–º —Å–ø–æ—Å–æ–±–æ–º.
>     

---
### üí° –†–µ–∑—é–º–µ –¥–ª—è –∫–æ–Ω—Å–ø–µ–∫—Ç–∞:

> [!SUCCESS] **–ì–ª–∞–≤–Ω—ã–π –∏–Ω—Å–∞–π—Ç**
> 
> `git restore` ‚Äî —ç—Ç–æ –≤–∞—à –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å.
> 
> - –ù—É–∂–Ω–æ —É–±—Ä–∞—Ç—å —Ñ–∞–π–ª –∏–∑ `git add`? -> `--staged`.
>     
> - –ù—É–∂–Ω–æ —Å—Ç–µ—Ä–µ—Ç—å –ø–ª–æ—Ö–æ–π –∫–æ–¥ –≤ —Ñ–∞–π–ª–µ? -> –ø—Ä–æ—Å—Ç–æ `restore`.
>     
> - –ù—É–∂–Ω–æ –¥–æ—Å—Ç–∞—Ç—å –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞ –∏–∑ –≤—á–µ—Ä–∞—à–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞? -> `--source`.
>     
>     –û–Ω–∞ –≥–æ—Ä–∞–∑–¥–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, —á–µ–º `reset --hard`, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å **—Ç–æ—á–µ—á–Ω–æ** —Å —Ñ–∞–π–ª–∞–º–∏, –Ω–µ –ª–æ–º–∞—è –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –≤–µ—Ç–∫–∏.
>     

---
### üîó –°–≤—è–∑–∏

- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏:** [[Git - git reset]] (–¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤—Å–µ–π –≤–µ—Ç–∫–∏)
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è:** [[Git - git switch]] (–≤–º–µ—Å—Ç–æ `checkout` –¥–ª—è –≤–µ—Ç–æ–∫)
- **–û—á–∏—Å—Ç–∫–∞ –º—É—Å–æ—Ä–∞:** [[Git - git clean]] (–¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è untracked —Ñ–∞–π–ª–æ–≤)