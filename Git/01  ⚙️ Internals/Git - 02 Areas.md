---
tags:
  - üêôgit
  - üêôgit/internals
  - üêôgit/theory
üí†Stack: üêô Git
üåç Scope:
  - üåé Global
üõ°Ô∏è Risk: ‚úÖ Safe
üìù Description: –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä Working Directory, Staging Area (Index) –∏ Repository —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã.
üíª Command:
  - git status
  - git add
  - git commit
  - git restore
---
# üêô –ì–ª–∞–≤–∞: –¢—Ä–∏ –æ–±–ª–∞—Å—Ç–∏ Git (The Three Trees)
*Architecture & Workflow*

> [!ABSTRACT]+ üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
> Git —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ—Ä—Å–∏—è–º–∏, –ø–µ—Ä–µ–º–µ—â–∞—è —Ñ–∞–π–ª—ã –º–µ–∂–¥—É —Ç—Ä–µ–º—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º–∏ –∑–æ–Ω–∞–º–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è. –ü–æ–Ω–∏–º–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–æ—Ç–æ–∫–∞ ‚Äî –∫–ª—é—á –∫ –ø–æ–Ω–∏–º–∞–Ω–∏—é —Ç–æ–≥–æ, "–≥–¥–µ —Å–µ–π—á–∞—Å –Ω–∞—Ö–æ–¥—è—Ç—Å—è –º–æ–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è".
> 
> –§–∏–∑–∏—á–µ—Å–∫–∏ –Ω–∞ –¥–∏—Å–∫–µ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ:
> 1.  –í–∞—à–µ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (sandbox).
> 2.  –ë–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞-–∏–Ω–¥–µ–∫—Å–∞ (–º–∞–Ω–∏—Ñ–µ—Å—Ç).
> 3.  –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–∏—Å—Ç–æ—Ä–∏—è).

---
## 1. üìÇ Working Directory
*–†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è / –†–∞–±–æ—á–µ–µ –¥–µ—Ä–µ–≤–æ*
> [!NOTE] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
> **Working Directory** ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å, –≥–¥–µ —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–º, —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ. –≠—Ç–æ "–ø–µ—Å–æ—á–Ω–∏—Ü–∞", –≥–¥–µ –≤—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç–µ –∫–æ–¥.
### 1.1 ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?
–° —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è, —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è ‚Äî —ç—Ç–æ **–æ–¥–Ω–æ–º–æ–º–µ–Ω—Ç–Ω—ã–π —Å–Ω–∏–º–æ–∫ (snapshot)** –æ–¥–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞, –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π –∏–∑ —Å–∂–∞—Ç–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Git –∏ –ø–æ–º–µ—â–µ–Ω–Ω—ã–π –Ω–∞ –¥–∏—Å–∫.
* **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:** –≠—Ç–æ –∫–æ—Ä–µ–Ω—å –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–≤—Å–µ –ø–∞–ø–∫–∏ –∏ —Ñ–∞–π–ª—ã), **–∏—Å–∫–ª—é—á–∞—è** –ø–∞–ø–∫—É `.git`.
* **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** –§–∞–π–ª—ã –∑–¥–µ—Å—å –º–æ–≥—É—Ç –±—ã—Ç—å –≤ –ª—é–±–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º, –∏–∑–º–µ–Ω–µ–Ω—ã –∏–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å—Å—è).
* **–°–≤—è–∑—å —Å Git:** Git –Ω–µ —Å–ª–µ–¥–∏—Ç –∑–∞ —ç—Ç–æ–π –ø–∞–ø–∫–æ–π "–æ–Ω–ª–∞–π–Ω". –û–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –Ω–µ–π —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –≤—ã –ø—Ä–æ—Å–∏—Ç–µ –æ–± —ç—Ç–æ–º (–∫–æ–º–∞–Ω–¥–æ–π `git status`), —Å—Ä–∞–≤–Ω–∏–≤–∞—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤ (–≤—Ä–µ–º—è –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ä–∞–∑–º–µ—Ä) —Å –∑–∞–ø–∏—Å—å—é –≤ **–ò–Ω–¥–µ–∫—Å–µ**.
### üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã
* `git status` ‚Äî —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –µ—ë —Å –ò–Ω–¥–µ–∫—Å–æ–º.

---

## 2. üì¶ Staging Area (The Index)
*–û–±–ª–∞—Å—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ / –ò–Ω–¥–µ–∫—Å / –ö—ç—à*
> [!NOTE] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
> **Staging Area** ‚Äî —ç—Ç–æ —Ñ–∞–π–ª-–º–∞–Ω–∏—Ñ–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–æ–π–¥–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–º–º–∏—Ç. –≠—Ç–æ "—á–µ—Ä–Ω–æ–≤–∏–∫" –±—É–¥—É—â–µ–≥–æ —Å–Ω–∏–º–∫–∞ —Å–∏—Å—Ç–µ–º—ã.
### 2.1 ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?
–ú–Ω–æ–≥–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —ç—Ç–æ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É, –∫—É–¥–∞ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è —Ñ–∞–π–ª—ã. **–≠—Ç–æ –Ω–µ —Ç–∞–∫.**

* **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:** –§–∏–∑–∏—á–µ—Å–∫–∏ —ç—Ç–æ **–æ–¥–∏–Ω –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª**, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–π –ø–æ –ø—É—Ç–∏ `.git/index`.
* **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ò–Ω–¥–µ–∫—Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–ø–∏—Å–æ–∫ (—Ç–∞–±–ª–∏—Ü—É), –≥–¥–µ –∫–∞–∂–¥–æ–º—É –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω SHA-1 —Ö—ç—à –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (Blob), –∞ —Ç–∞–∫–∂–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏).
* **–ú–µ—Ö–∞–Ω–∏–∫–∞** `git add`:
    1.  –ö–æ–≥–¥–∞ –≤—ã –¥–µ–ª–∞–µ—Ç–µ `git add file.txt`, Git –±–µ—Ä–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞.
    2.  –•–µ—à–∏—Ä—É–µ—Ç –µ–≥–æ (SHA-1).
    3.  –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–∞–º –æ–±—ä–µ–∫—Ç (Blob) –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (`.git/objects`).
    4.  **–û–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª–µ** `.git/index`, —É–∫–∞–∑—ã–≤–∞—è, —á—Ç–æ –¥–ª—è `file.txt` —Ç–µ–ø–µ—Ä—å –∞–∫—Ç—É–∞–ª–µ–Ω –Ω–æ–≤—ã–π —Ö—ç—à.

> [!INFO] –ü–æ—á–µ–º—É "Index"?
> –ü–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ—Ç —Ñ–∞–π–ª –±—É–∫–≤–∞–ª—å–Ω–æ *–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç* —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —Å–≤—è–∑—ã–≤–∞—è –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

> [!question] ‚ùì –í–æ–ø—Ä–æ—Å –∏–Ω–∂–µ–Ω–µ—Ä–∞: –ß—Ç–æ –µ—Å–ª–∏ —è —É–±–µ—Ä—É —Ñ–∞–π–ª –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ (`git restore --staged`)?
> –ï—Å–ª–∏ –≤—ã —Å–¥–µ–ª–∞–ª–∏ `git add` (—Å–æ–∑–¥–∞–ª–∏ Blob), –∞ –ø–æ—Ç–æ–º –ø–µ—Ä–µ–¥—É–º–∞–ª–∏ –∏ —Å–¥–µ–ª–∞–ª–∏ `git restore --staged`:
> 1.  –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª–µ `index` –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤–µ—Ä—Å–∏–µ–π –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞.
> 2.  **–í–ê–ñ–ù–û:** –°–∞–º –æ–±—ä–µ–∫—Ç Blob (—Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏), —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–æ–º–∞–Ω–¥–æ–π `add`, **–Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è** –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!
> 3.  –û–Ω –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –±–∞–∑–µ `.git/objects`, –Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **"–ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–º" (dangling blob)** ‚Äî –Ω–∞ –Ω–µ–≥–æ –Ω–∏–∫—Ç–æ –Ω–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è.

> [!tip] üóëÔ∏è Garbage Collection (–°–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞)
> –í–∞–º **–Ω–µ –Ω—É–∂–Ω–æ** –∏—Å–∫–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —ç—Ç–∏ "–ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ" –±–ª–æ–±—ã —Ä—É–∫–∞–º–∏.
> Git –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `git gc` (Garbage Collector). –û–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç –æ–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ—Ç —Å—Å—ã–ª–æ–∫, –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –∏—Ö —Å –¥–∏—Å–∫–∞ (–æ–±—ã—á–Ω–æ, –µ—Å–ª–∏ –æ–Ω–∏ —Å—Ç–∞—Ä—à–µ 2 –Ω–µ–¥–µ–ª—å).

### 2.2 üïµÔ∏è –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ index —Ñ–∞–π–ª–∞?

> [!WARNING] ‚õî –ù–µ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
> –§–∞–π–ª `.git/index` ‚Äî **–±–∏–Ω–∞—Ä–Ω—ã–π**.
> –ï—Å–ª–∏ –≤—ã –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ `cat` –∏–ª–∏ `nano`, –≤—ã —É–≤–∏–¥–∏—Ç–µ –Ω–∞–±–æ—Ä –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ ("–∫—Ä–∞–∫–æ–∑—è–±—Ä—ã").
–ß—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å –µ–≥–æ, –Ω—É–∂–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å–∞–Ω—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è (plumbing) –∫–æ–º–∞–Ω–¥–∞:
>```bash
git ls-files --stage
>```

>[!EXAMPLE] –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞
>–ö–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ (—Ç–æ, —á—Ç–æ –ø–æ–π–¥–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–º–º–∏—Ç) –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ:
>```
><–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞> <—Ö—ç—à –æ–±—ä–µ–∫—Ç–∞> <–Ω–æ–º–µ—Ä —Å—Ç–µ–π–¥–∂–∞> <–∏–º—è —Ñ–∞–π–ª–∞>
>```
>*–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:*
>```
>100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0       README.md
100644 97899951859e404c0846261545631742468307e5 0       app.py
>```

>[!NOTE] üîç –î–µ–∫–æ–¥–µ—Ä: –ö–∞–∫ —ç—Ç–æ —á–∏—Ç–∞—Ç—å? 
>- `100644` ‚Äî –≠—Ç–æ –æ–±—ã—á–Ω—ã–π —Ñ–∞–π–ª (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞).
>- `e69de2...` ‚Äî –≠—Ç–æ **SHA-1 —Ö—ç—à** –±–ª–æ–±–∞, –∫–æ—Ç–æ—Ä—ã–π _—Å–µ–π—á–∞—Å_ –∑–∞–ø–∏—Å–∞–Ω –≤ –∏–Ω–¥–µ–∫—Å–µ.
>- `0` ‚Äî –ù–æ–º–µ—Ä —Å—Ç–µ–π–¥–∂–∞ (Stage).
>-- `0` ‚Äî –æ–±—ã—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
>-- `1`, `2`, `3` ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö —Å–ª–∏—è–Ω–∏—è.
>-- `README.md` ‚Äî –ò–º—è —Ñ–∞–π–ª–∞.
### üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã
* `git add` ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª–µ `.git/index`.
* `git restore --staged` ‚Äî —É–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏–∑ `.git/index`.
* `git diff --staged` ‚Äî —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `.git/index` —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –∫–æ–º–º–∏—Ç–æ–º (`HEAD`).
* `git ls-files --stage` ‚Äî  —á–∏—Ç–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ index-—Ñ–∞–π–ª–∞.

---

## 3. üèõÔ∏è Repository (Local Repo)
*–õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π / –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤*
> [!NOTE] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
> **Repository** ‚Äî —ç—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–∏—Å—Ç–æ—Ä–∏—è). –ó–¥–µ—Å—å –∂–∏–≤—É—Ç –∫–æ–º–º–∏—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —É–∂–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∏.
### 1.1 ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?
–≠—Ç–æ "—Å–µ—Ä–¥—Ü–µ" Git. –í—Å—ë, —á—Ç–æ –ø–æ–ø–∞–ª–æ —Å—é–¥–∞, –æ—á–µ–Ω—å —Ç—Ä—É–¥–Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å.

* **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:** –≠—Ç–æ –ø–∞–ø–∫–∞ `.git/`.
* **–°–æ—Å—Ç–∞–≤:**
    * **Objects Database** (`.git/objects`): –ó–¥–µ—Å—å –ª–µ–∂–∞—Ç —Å–∂–∞—Ç—ã–µ —Ñ–∞–π–ª—ã (–±–ª–æ–±—ã, –¥–µ—Ä–µ–≤—å—è, –∫–æ–º–º–∏—Ç—ã).
    * **Refs **(`.git/refs`): –ó–¥–µ—Å—å –ª–µ–∂–∞—Ç —É–∫–∞–∑–∞—Ç–µ–ª–∏ (–≤–µ—Ç–∫–∏, —Ç–µ–≥–∏), –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω—è—Ç —Ö—ç—à –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞.
    * **HEAD** (`.git/HEAD`): –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ç–µ–∫—É—â—É—é –∞–∫—Ç–∏–≤–Ω—É—é –≤–µ—Ç–∫—É.

* **–ú–µ—Ö–∞–Ω–∏–∫–∞ `git commit`:**
    1.  Git –±–µ—Ä–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ **–ò–Ω–¥–µ–∫—Å–∞** (–Ω–µ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏!).
    2.  –°–æ–∑–¥–∞–µ—Ç –∏–∑ –Ω–µ–≥–æ –æ–±—ä–µ–∫—Ç **Tree** (–¥–µ—Ä–µ–≤–æ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã).
    3.  –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —ç—Ç–æ –¥–µ—Ä–µ–≤–æ –≤ –æ–±—ä–µ–∫—Ç **Commit** (–¥–æ–±–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ—Ä–∞, –¥–∞—Ç—É, —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—è).
    4.  –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—ä–µ–∫—Ç –ö–æ–º–º–∏—Ç–∞ –≤ –±–∞–∑—É.
    5.  –°–¥–≤–∏–≥–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å —Ç–µ–∫—É—â–µ–π –≤–µ—Ç–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `main`) –Ω–∞ –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç.

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
–†–∞–∑–±–æ—Ä —Ç–æ–≥–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏.

| –ö–æ–º–∞–Ω–¥–∞                | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ          | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"                                                                                                                               |
| :--------------------- | :------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `git add <file>`       | WD ‚ûî Index           | 1. –°–æ–∑–¥–∞–µ—Ç—Å—è Blob –≤ –ë–î.<br>2. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `.git/index`.                                                                                           |
| `git restore --staged` | Index ‚ûî WD (Virtual) | 1. Git –±–µ—Ä–µ—Ç —Ö—ç—à —Ñ–∞–π–ª–∞ –∏–∑ `HEAD` (–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞).<br>2. –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏–º –∑–∞–ø–∏—Å—å –≤ `.git/index`.<br>‚ö†Ô∏è *Blob –æ—Ç `git add` –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –±–∞–∑–µ –∫–∞–∫ –º—É—Å–æ—Ä.* |
| `git commit`           | Index ‚ûî Repo         | –°–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç Commit, —Ñ–∏–∫—Å–∏—Ä—É—é—â–∏–π —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ò–Ω–¥–µ–∫—Å–∞.                                                                                            |
| `git commit -a`        | WD ‚ûî Repo            | **–®–æ—Ä—Ç–∫–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç `add` –¥–ª—è **—É–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö** —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º.<br>‚ö†Ô∏è *–ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ù–û–í–´–ï (untracked) —Ñ–∞–π–ª—ã.*                       |
| `git checkout <hash>`  | Repo ‚ûî WD + Index    | 1. –û–±–Ω–æ–≤–ª—è–µ—Ç `.git/index` –ø–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞.<br>2. –§–∏–∑–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –≤ —Ä–∞–±–æ—á–µ–π –ø–∞–ø–∫–µ.                                                     |
| `git ls-files --stage` | Index                | –ß–∏—Ç–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ index-—Ñ–∞–π–ª–∞.                                                                                                                             |

---

## üïµÔ∏è Deep Dive: –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
–§–∏–∑–∏—á–µ—Å–∫–æ–µ –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ –∑–æ–Ω –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:

```text
MyProject/
‚îú‚îÄ‚îÄ .git/
‚îÇ   ‚îú‚îÄ‚îÄ index             # <--- Staging Area (–ë–∏–Ω–∞—Ä–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä)
‚îÇ   ‚îú‚îÄ‚îÄ objects/          # <--- Repository (–í—Å–µ –±–ª–æ–±—ã –∏ –∫–æ–º–º–∏—Ç—ã –∑–¥–µ—Å—å)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ a1/           # <--- (–ü–∞–ø–∫–∏ —Å –ø–µ—Ä–≤—ã–º–∏ 2 —Å–∏–º–≤–æ–ª–∞–º–∏ —Ö—ç—à–∞)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ b2/
‚îÇ   ‚îú‚îÄ‚îÄ HEAD              # <--- –°—Å—ã–ª–∫–∞ "–ì–¥–µ —è —Å–µ–π—á–∞—Å?"
‚îÇ   ‚îî‚îÄ‚îÄ refs/             # <--- –£–∫–∞–∑–∞—Ç–µ–ª–∏ –≤–µ—Ç–æ–∫ (main, develop)
‚îú‚îÄ‚îÄ file.txt              # <--- Working Directory (–í–∞—à —Ñ–∞–π–ª)
‚îî‚îÄ‚îÄ app.py                # <--- Working Directory (–í–∞—à –∫–æ–¥)
```

## üîó –°–≤—è–∑–∏
- **–ü–æ–¥—Ä–æ–±–Ω–æ –æ —Ç–∏–ø–∞—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ Git:** [[Git - 00 Objects Type|Objects Type]]
- **–ö–æ–º–∞–Ω–¥—ã Git:** [[Git - Cheat Sheet|Cheat Sheet]]